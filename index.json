[{"content":"A snippet of my build.gradle looks like this:\nplugins { id \u0026#39;java\u0026#39; id \u0026#39;org.springframework.boot\u0026#39; version \u0026#39;3.5.0\u0026#39; id \u0026#39;io.spring.dependency-management\u0026#39; version \u0026#39;1.1.7\u0026#39; } java { toolchain { languageVersion = JavaLanguageVersion.of(17) } } ... While using VS Code, for reason unknown to me, the PROBLEMS tab shows the below:\nThe supplied phased action failed with an exception. A problem occurred configuring root project \u0026#39;springboot-challenge\u0026#39;. Could not resolve all artifacts for configuration \u0026#39;classpath\u0026#39;. Could not resolve org.springframework.boot:spring-boot-gradle-plugin:3.5.0. Required by: root project : \u0026gt; org.springframework.boot:org.springframework.boot.gradle.plugin:3.5.0 Dependency requires at least JVM runtime version 17. This build uses a Java 11 JVM. There was no issue running ./gradlew build from the Terminal.\nThe JVM version used is correct:\n$ java --version openjdk 17.0.15 2025-04-15 OpenJDK Runtime Environment (build 17.0.15+6-Ubuntu-0ubuntu124.04) OpenJDK 64-Bit Server VM (build 17.0.15+6-Ubuntu-0ubuntu124.04, mixed mode, sharing) Eventually, I\u0026rsquo;ve used the steps below to make the problem go away.\nCtrl + Shift + P Look for java.import.gradle.java.home Click on Java: Import Java Project Into Workspace ","permalink":"https://www.ytpor.com/2025/05/could-not-resolve-spring-boot-gradle-plugin/","summary":"\u003cp\u003eA snippet of my \u003ccode\u003ebuild.gradle\u003c/code\u003e looks like this:\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eplugins {\n\tid \u0026#39;java\u0026#39;\n\tid \u0026#39;org.springframework.boot\u0026#39; version \u0026#39;3.5.0\u0026#39;\n\tid \u0026#39;io.spring.dependency-management\u0026#39; version \u0026#39;1.1.7\u0026#39;\n}\n\njava {\n\ttoolchain {\n\t\tlanguageVersion = JavaLanguageVersion.of(17)\n\t}\n}\n...\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWhile using \u003ccode\u003eVS Code\u003c/code\u003e, for reason unknown to me, the \u003ccode\u003ePROBLEMS\u003c/code\u003e tab shows the below:\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eThe supplied phased action failed with an exception.\nA problem occurred configuring root project \u0026#39;springboot-challenge\u0026#39;.\nCould not resolve all artifacts for configuration \u0026#39;classpath\u0026#39;.\nCould not resolve org.springframework.boot:spring-boot-gradle-plugin:3.5.0.\nRequired by:\n    root project : \u0026gt; org.springframework.boot:org.springframework.boot.gradle.plugin:3.5.0\nDependency requires at least JVM runtime version 17. This build uses a Java 11 JVM.\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThere was no issue running \u003ccode\u003e./gradlew build\u003c/code\u003e from the \u003ccode\u003eTerminal\u003c/code\u003e.\u003c/p\u003e","title":"Could not resolve org.springframework.boot:spring-boot-gradle-plugin"},{"content":"This setup is done on Windows 11, using WSL. We are using a private key to SSH to the server. Make sure that you have SSH to the server at least once, and has the server is listed in ~/.ssh/known_hosts\nAssuming that our server is on 218.8.8.88, and the Windows Desktop we want to access is on 10.219.80.88 (private network).\nOn WSL, run ssh -N -L 13389:10.219.80.88:3389 218.8.8.88 -l username Subsequently, set the Computer in Remote Desktop Connection to localhost:13389. Computer: localhost:13389 User name: Username ","permalink":"https://www.ytpor.com/2025/05/ssh-tunnel-to-rdp-in-private-network/","summary":"\u003cp\u003eThis setup is done on Windows 11, using WSL. We are using a private key to SSH to the server. Make sure that you have SSH to the server at least once, and has the server is listed in \u003ccode\u003e~/.ssh/known_hosts\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eAssuming that our server is on 218.8.8.88, and the Windows Desktop we want to access is on 10.219.80.88 (private network).\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eOn \u003ccode\u003eWSL\u003c/code\u003e, run \u003ccode\u003essh -N -L 13389:10.219.80.88:3389 218.8.8.88 -l username\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eSubsequently, set the \u003ccode\u003eComputer\u003c/code\u003e in Remote Desktop Connection to \u003ccode\u003elocalhost:13389\u003c/code\u003e.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eComputer: localhost:13389\nUser name: Username\n\u003c/code\u003e\u003c/pre\u003e","title":"SSH Tunnel to RDP to Desktop in Private Network"},{"content":"This setup is done on Windows 11, using HeidiSQL. We are using a private key to SSH to the server. Make sure that you have SSH to the server at least once, and has the server is listed in ~/.ssh/known_hosts\nAssuming that our server is on 218.8.8.88, and our MySQL is on 10.219.80.88 (private network).\nOpen HeidiSQL. Create a New Session: Click on the New button to create a new session. Configure the Session: Under the Settings tab: Network Type: Select MySQL (SSH tunnel) Hostname / IP: 10.219.80.88 User: Enter your MySQL username. Password: Enter your MySQL password. Port: The default MySQL port is 3306. SSH tunnel tab: Check Use SSH tunnel SSH executable: ssh.exe SSH Host + Port: Enter 218.8.8.88 (the SSH server IP) and the SSH port (default is 22). Username: Enter your SSH username. Password: Enter your SSH password or use an SSH key if you have one. Private key file: Locate your private key file Local port: 3307 Save and Connect: Click Save to save the session. Click Open to establish the connection. ","permalink":"https://www.ytpor.com/2024/10/ssh-tunnel-to-mysql-in-private-network/","summary":"\u003cp\u003eThis setup is done on Windows 11, using HeidiSQL. We are using a private key to SSH to the server. Make sure that you have SSH to the server at least once, and has the server is listed in \u003ccode\u003e~/.ssh/known_hosts\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eAssuming that our server is on 218.8.8.88, and our MySQL is on 10.219.80.88 (private network).\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eOpen HeidiSQL.\u003c/li\u003e\n\u003cli\u003eCreate a New Session:\n\u003cul\u003e\n\u003cli\u003eClick on the \u003ccode\u003eNew\u003c/code\u003e button to create a new session.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eConfigure the Session:\n\u003cul\u003e\n\u003cli\u003eUnder the Settings tab:\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eNetwork Type\u003c/strong\u003e: Select MySQL (SSH tunnel)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eHostname / IP\u003c/strong\u003e: 10.219.80.88\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eUser\u003c/strong\u003e: Enter your MySQL username.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePassword\u003c/strong\u003e: Enter your MySQL password.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePort\u003c/strong\u003e: The default MySQL port is 3306.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eSSH tunnel tab:\n\u003cul\u003e\n\u003cli\u003eCheck \u003cstrong\u003eUse SSH tunnel\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSSH executable\u003c/strong\u003e: ssh.exe\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSSH Host + Port\u003c/strong\u003e: Enter 218.8.8.88 (the SSH server IP) and the SSH port (default is 22).\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eUsername\u003c/strong\u003e: Enter your SSH username.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePassword\u003c/strong\u003e: Enter your SSH password or use an SSH key if you have one.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePrivate key file\u003c/strong\u003e: Locate your private key file\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eLocal port\u003c/strong\u003e: 3307\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eSave and Connect:\n\u003cul\u003e\n\u003cli\u003eClick \u003ccode\u003eSave\u003c/code\u003e to save the session.\u003c/li\u003e\n\u003cli\u003eClick \u003ccode\u003eOpen\u003c/code\u003e to establish the connection.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","title":"SSH Tunnel to MySQL in Private Network"},{"content":"We have come across an occassion where we need to run multiple MariaDB databases on different port on the same Windows server. For our use case, each of the database represents a particular enviroment, eg. staging, sandbox or production. The same technique that I am going to illustrate will work for MySQL.\nHere\u0026rsquo;s how it was done.\nUpon installing MariaDB, we made a few copies of the data folder found in C:\\Program Files\\MariaDB 10.11\\data, and named them:-\nC:\\DatabaseStaging C:\\DatabaseSandbox C:\\DatabaseProduction Next, we updated the my.ini within those folders. The content of my.ini will probably look like what\u0026rsquo;s shown below.\n[mysqld] datadir=C:\\Program Files\\MariaDB 10.11\\data port=3308 default_storage_engine=innodb innodb_buffer_pool_size=1011M character-set-server=utf8 [client] port=3308 plugin-dir=C:\\Program Files\\MariaDB 10.11\\lib\\plugin Assuming that we will run each of the instance on a different port, eg. 33008, 33009, 33010, we will need to update the port number and the value of datadir.\nSo, for C:\\DatabaseStaging\\my.ini, it would look something like this. You\u0026rsquo;ll have to update the other my.ini accordingly.\n[mysqld] datadir=C:\\DatabaseStaging port=33008 default_storage_engine=innodb innodb_buffer_pool_size=1011M character-set-server=utf8 [client] port=33008 plugin-dir=C:\\Program Files\\MariaDB 10.11\\lib\\plugin Now that the setup is done, we\u0026rsquo;ll need to add the services.\nHere\u0026rsquo;s the PowerShell command to add the DatabaseStaging service. Change the command accodingly for the other services. Take note of the backticks that is being used to handle spaces within the path.\nNew-Service -Name \u0026#34;DatabaseStaging\u0026#34; -BinaryPathName \u0026#34;`\u0026#34;C:\\Program Files\\MariaDB 10.11\\bin\\mysqld.exe`\u0026#34; --defaults-file=C:\\DatabaseStaging\\my.ini DatabaseStaging\u0026#34; -DisplayName \u0026#34;DatabaseStaging\u0026#34; -Description \u0026#34; Staging MariaDB Service\u0026#34; -StartupType Automatic After adding the services, start those services, and we are done.\n","permalink":"https://www.ytpor.com/2024/07/running-multiple-instances-of-mariadb.html","summary":"\u003cp\u003eWe have come across an occassion where we need to run multiple \u003ccode\u003eMariaDB\u003c/code\u003e databases on different port on the same Windows server. For our use case, each of the database represents a particular enviroment, eg. staging, sandbox or production. The same technique that I am going to illustrate will work for \u003ccode\u003eMySQL\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eHere\u0026rsquo;s how it was done.\u003c/p\u003e\n\u003cp\u003eUpon installing MariaDB, we made a few copies of the data folder found in \u003ccode\u003eC:\\Program Files\\MariaDB 10.11\\data\u003c/code\u003e, and named them:-\u003c/p\u003e","title":"Running multiple instances of MariaDB"},{"content":"We work in an environment where we have multiple GitHub accounts that is tied to different repositories. It took us a while to figure out how to properly set this up, so that the correct identify is tied to the correct repository.\nLet me walk you through an example on how we did it.\nAssuming that you have 3 identity, ie. 3 private keys, tied to 3 different GitHub repository.\nHere\u0026rsquo;s what our ~/.ssh/config looks like.\nHost github.com.one HostName github.com User git IdentityFile ~/.ssh/id_ed25519_one Host github.com.two HostName github.com User git IdentityFile ~/.ssh/id_ed25519_two Host github.com.three HostName github.com User git IdentityFile ~/.ssh/id_ed25519_three Let\u0026rsquo;s say, we checked out the following public repository owned by each of the 3 identities.\none/repository_one two/repository_two three/repository_three Upon checking out each repository, before you can commit to it, you need to update its .git/config.\nrepository_one/.git/config looks like this.\n[core] repositoryformatversion = 0 filemode = true bare = false logallrefupdates = true [remote \u0026#34;origin\u0026#34;] url = git@github.com:one/repository_one.git fetch = +refs/heads/*:refs/remotes/origin/* [branch \u0026#34;main\u0026#34;] remote = origin merge = refs/heads/main You need to update the url to the following.\nurl = git@github.com.one:one/repository_one.git Also, add [user] to .git/config.\n[user] name = User One email = user_one@one.com When done, repository_one/.git/config will look like this.\n[core] repositoryformatversion = 0 filemode = true bare = false logallrefupdates = true [remote \u0026#34;origin\u0026#34;] url = git@github.com.one:one/my_repository.git fetch = +refs/heads/*:refs/remotes/origin/* [branch \u0026#34;main\u0026#34;] remote = origin merge = refs/heads/main [user] name = User One email = user_one@one.com repository_two/.git/config will look like this.\n[core] repositoryformatversion = 0 filemode = true bare = false logallrefupdates = true [remote \u0026#34;origin\u0026#34;] url = git@github.com.two:two/my_repository.git fetch = +refs/heads/*:refs/remotes/origin/* [branch \u0026#34;main\u0026#34;] remote = origin merge = refs/heads/main [user] name = User Two email = user_two@two.com repository_three/.git/config will look like this.\n[core] repositoryformatversion = 0 filemode = true bare = false logallrefupdates = true [remote \u0026#34;origin\u0026#34;] url = git@github.com.three:three/my_repository.git fetch = +refs/heads/*:refs/remotes/origin/* [branch \u0026#34;main\u0026#34;] remote = origin merge = refs/heads/main [user] name = User Three email = user_three@three.com ","permalink":"https://www.ytpor.com/2023/05/multiple-github-accounts-and-repositories.html","summary":"\u003cp\u003eWe work in an environment where we have multiple GitHub accounts that is tied to different repositories. It took us a while to figure out how to properly set this up, so that the correct identify is tied to the correct repository.\u003c/p\u003e\n\u003cp\u003eLet me walk you through an example on how we did it.\u003c/p\u003e\n\u003cp\u003eAssuming that you have 3 identity, ie. 3 private keys, tied to 3 different GitHub repository.\u003c/p\u003e","title":"Multiple GitHub Accounts and Repositories"},{"content":"We are working on a project that makes use of Yii2 advanced template. This project needs to support Internationalization (i18n).\nIn each of our application, we have a translation configuration. This is needed to generate the translation. The files would be generated in backend/messages, common/messages or frontend/messages.\nHere\u0026rsquo;s a sample.\n\u0026lt;?php // backend/config/i18n.php // common/config/i18n.php // frontend/config/i18n.php return [ \u0026#39;sourcePath\u0026#39; =\u0026gt; __DIR__ . DIRECTORY_SEPARATOR . \u0026#39;..\u0026#39;, \u0026#39;languages\u0026#39; =\u0026gt; [ \u0026#39;zh-CN\u0026#39;, ], \u0026#39;translator\u0026#39; =\u0026gt; \u0026#39;Yii::t\u0026#39;, \u0026#39;sort\u0026#39; =\u0026gt; true, \u0026#39;removeUnused\u0026#39; =\u0026gt; true, \u0026#39;markUnused\u0026#39; =\u0026gt; true, \u0026#39;only\u0026#39; =\u0026gt; [\u0026#39;*.php\u0026#39;], \u0026#39;except\u0026#39; =\u0026gt; [ \u0026#39;.svn\u0026#39;, \u0026#39;.git\u0026#39;, \u0026#39;.gitignore\u0026#39;, \u0026#39;.gitkeep\u0026#39;, \u0026#39;.hgignore\u0026#39;, \u0026#39;.hgkeep\u0026#39;, \u0026#39;/assets\u0026#39;, \u0026#39;/command\u0026#39;, \u0026#39;/config\u0026#39;, \u0026#39;/mail\u0026#39;, \u0026#39;/messages\u0026#39;, \u0026#39;/modules\u0026#39;, \u0026#39;/runtime\u0026#39;, \u0026#39;/tests\u0026#39;, \u0026#39;/vagrant\u0026#39;, \u0026#39;/vendor\u0026#39;, \u0026#39;/views/user/settings\u0026#39;, \u0026#39;/web\u0026#39;, \u0026#39;/widgets\u0026#39;, ], \u0026#39;format\u0026#39; =\u0026gt; \u0026#39;php\u0026#39;, \u0026#39;messagePath\u0026#39; =\u0026gt; __DIR__ . DIRECTORY_SEPARATOR . \u0026#39;..\u0026#39; . DIRECTORY_SEPARATOR . \u0026#39;messages\u0026#39;, \u0026#39;overwrite\u0026#39; =\u0026gt; true, ]; Here are some samples of how the text should be wrapped.\n// You\u0026#39;ll use this in common Yii::t(\u0026#39;app\u0026#39;, \u0026#39;Hello world!\u0026#39;); // You\u0026#39;ll use this in backend Yii::t(\u0026#39;backend\u0026#39;, \u0026#39;Hello world!\u0026#39;); // You\u0026#39;ll use this in frontend Yii::t(\u0026#39;frontend\u0026#39;, \u0026#39;Hello world!\u0026#39;); Here\u0026rsquo;s how we configured our application to work with the translation.\n// common/config/main.php \u0026#39;components\u0026#39; =\u0026gt; [ // ... \u0026#39;i18n\u0026#39; =\u0026gt; [ \u0026#39;translations\u0026#39; =\u0026gt; [ \u0026#39;app*\u0026#39; =\u0026gt; [ \u0026#39;class\u0026#39; =\u0026gt; \u0026#39;yii\\i18n\\PhpMessageSource\u0026#39;, \u0026#39;basePath\u0026#39; =\u0026gt; \u0026#39;@common/messages\u0026#39;, \u0026#39;sourceLanguage\u0026#39; =\u0026gt; \u0026#39;en-US\u0026#39;, ], \u0026#39;backend*\u0026#39; =\u0026gt; [ \u0026#39;class\u0026#39; =\u0026gt; \u0026#39;yii\\i18n\\PhpMessageSource\u0026#39;, \u0026#39;basePath\u0026#39; =\u0026gt; \u0026#39;@backend/messages\u0026#39;, \u0026#39;sourceLanguage\u0026#39; =\u0026gt; \u0026#39;en-US\u0026#39;, ], \u0026#39;frontend*\u0026#39; =\u0026gt; [ \u0026#39;class\u0026#39; =\u0026gt; \u0026#39;yii\\i18n\\PhpMessageSource\u0026#39;, \u0026#39;basePath\u0026#39; =\u0026gt; \u0026#39;@frontend/messages\u0026#39;, \u0026#39;sourceLanguage\u0026#39; =\u0026gt; \u0026#39;en-US\u0026#39;, ], ], ], // ... ], ","permalink":"https://www.ytpor.com/2023/05/yii2-internationalization-i18n-for-advanced-template.html","summary":"\u003cp\u003eWe are working on a project that makes use of Yii2 advanced template. This project needs to support Internationalization (i18n).\u003c/p\u003e\n\u003cp\u003eIn each of our application, we have a translation configuration. This is needed to generate the translation. The files would be generated in \u003ccode\u003ebackend/messages\u003c/code\u003e, \u003ccode\u003ecommon/messages\u003c/code\u003e or \u003ccode\u003efrontend/messages\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eHere\u0026rsquo;s a sample.\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e\u0026lt;?php\n// backend/config/i18n.php\n// common/config/i18n.php\n// frontend/config/i18n.php\n\nreturn [\n    \u0026#39;sourcePath\u0026#39; =\u0026gt; __DIR__ . DIRECTORY_SEPARATOR . \u0026#39;..\u0026#39;,\n    \u0026#39;languages\u0026#39; =\u0026gt; [\n        \u0026#39;zh-CN\u0026#39;,\n    ],\n    \u0026#39;translator\u0026#39; =\u0026gt; \u0026#39;Yii::t\u0026#39;,\n    \u0026#39;sort\u0026#39; =\u0026gt; true,\n    \u0026#39;removeUnused\u0026#39; =\u0026gt; true,\n    \u0026#39;markUnused\u0026#39; =\u0026gt; true,\n    \u0026#39;only\u0026#39; =\u0026gt; [\u0026#39;*.php\u0026#39;],\n    \u0026#39;except\u0026#39; =\u0026gt; [\n        \u0026#39;.svn\u0026#39;,\n        \u0026#39;.git\u0026#39;,\n        \u0026#39;.gitignore\u0026#39;,\n        \u0026#39;.gitkeep\u0026#39;,\n        \u0026#39;.hgignore\u0026#39;,\n        \u0026#39;.hgkeep\u0026#39;,\n        \u0026#39;/assets\u0026#39;,\n        \u0026#39;/command\u0026#39;,\n        \u0026#39;/config\u0026#39;,\n        \u0026#39;/mail\u0026#39;,\n        \u0026#39;/messages\u0026#39;,\n        \u0026#39;/modules\u0026#39;,\n        \u0026#39;/runtime\u0026#39;,\n        \u0026#39;/tests\u0026#39;,\n        \u0026#39;/vagrant\u0026#39;,\n        \u0026#39;/vendor\u0026#39;,\n        \u0026#39;/views/user/settings\u0026#39;,\n        \u0026#39;/web\u0026#39;,\n        \u0026#39;/widgets\u0026#39;,\n    ],\n    \u0026#39;format\u0026#39; =\u0026gt; \u0026#39;php\u0026#39;,\n    \u0026#39;messagePath\u0026#39; =\u0026gt; __DIR__ . DIRECTORY_SEPARATOR . \u0026#39;..\u0026#39; . DIRECTORY_SEPARATOR . \u0026#39;messages\u0026#39;,\n    \u0026#39;overwrite\u0026#39; =\u0026gt; true,\n];\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eHere are some samples of how the text should be wrapped.\u003c/p\u003e","title":"Yii2 Internationalization (i18n) for advanced template"},{"content":"We use MongoDB (important point) with our Yii 2 applicaton.\nWhile setting up our API test fixtures in our Cest file, $I-\u0026gt;grabFixture was not able to find the data we wanted eventhough we have defined it within the dataFile.\n[yii\\base\\ErrorException] Trying to get property \u0026#39;client_id\u0026#39; of non-object Here\u0026rsquo;s what the dataFile looks like.\n\u0026lt;?php // This doesn\u0026#39;t work. return [ \u0026#39;client_one\u0026#39; =\u0026gt; [ \u0026#39;client_id\u0026#39; =\u0026gt; \u0026#39;mytestclient\u0026#39;, ], ]; After some experimentation, we\u0026rsquo;ve found that we need to set the _id within the dataFile in order to get $I-\u0026gt;grabFixture to work properly.\n\u0026lt;?php // This works. return [ \u0026#39;client_one\u0026#39; =\u0026gt; [ \u0026#39;_id\u0026#39; =\u0026gt; new MongoDB\\BSON\\ObjectId(\u0026#39;60ea4a7db868d02fe478b6a4\u0026#39;), \u0026#39;client_id\u0026#39; =\u0026gt; \u0026#39;mytestclient\u0026#39;, ], ]; ","permalink":"https://www.ytpor.com/2021/07/yii-2-codeception-fixtures-gotcha.html","summary":"\u003cp\u003eWe use MongoDB (important point) with our Yii 2 applicaton.\u003c/p\u003e\n\u003cp\u003eWhile setting up our API test fixtures in our Cest file, \u003cstrong\u003e$I-\u0026gt;grabFixture\u003c/strong\u003e was not able to find the data we wanted eventhough we have defined it within the dataFile.\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e[yii\\base\\ErrorException] Trying to get property \u0026#39;client_id\u0026#39; of non-object\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eHere\u0026rsquo;s what the dataFile looks like.\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e\u0026lt;?php\n// This doesn\u0026#39;t work.\nreturn [\n    \u0026#39;client_one\u0026#39; =\u0026gt;\n    [\n        \u0026#39;client_id\u0026#39; =\u0026gt; \u0026#39;mytestclient\u0026#39;,\n    ],\n];\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAfter some experimentation, we\u0026rsquo;ve found that we need to set the \u003cstrong\u003e_id\u003c/strong\u003e within the dataFile in order to get \u003cstrong\u003e$I-\u0026gt;grabFixture\u003c/strong\u003e to work properly.\u003c/p\u003e","title":"Yii 2 Codeception Fixtures Gotcha"},{"content":"My API uses the Yii2 advanced template. It uses symfony/dotenv to read the .env. The .env is loaded in all the configurations.\n$dotenv = new Symfony\\Component\\Dotenv\\Dotenv; $dotenv-\u0026gt;load(__DIR__ . \u0026#39;/../../.env\u0026#39;); While running the Codeception api test, I came across this error.\n[PHPUnit\\Framework\\Exception] Undefined index: HOST at ../common/config/main-local.php:7 After much digging around, I\u0026rsquo;ve realized that I need to load Symfony\\Component\\Dotenv\\Dotenv in common/config/codeception-local.php Thus, I have updated that file in the environment folder, and reran php init.\n\u0026lt;?php # environments/dev/common/config/codeception-local.php # Add these 2 lines below $dotenv = new Symfony\\Component\\Dotenv\\Dotenv; $dotenv-\u0026gt;load(__DIR__ . \u0026#39;/../../.env.example\u0026#39;); return yii\\helpers\\ArrayHelper::merge( require __DIR__ . \u0026#39;/main.php\u0026#39;, require __DIR__ . \u0026#39;/main-local.php\u0026#39;, require __DIR__ . \u0026#39;/test.php\u0026#39;, require __DIR__ . \u0026#39;/test-local.php\u0026#39;, [ \u0026#39;components\u0026#39; =\u0026gt; [ ], ] ); ","permalink":"https://www.ytpor.com/2021/06/yii-2-codeception-api-test.html","summary":"\u003cp\u003eMy API uses the Yii2 advanced template. It uses symfony/dotenv to read the .env. The .env is loaded in all the configurations.\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e$dotenv = new Symfony\\Component\\Dotenv\\Dotenv;\n$dotenv-\u0026gt;load(__DIR__ . \u0026#39;/../../.env\u0026#39;);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWhile running the Codeception api test, I came across this error.\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e[PHPUnit\\Framework\\Exception] Undefined index: HOST at ../common/config/main-local.php:7\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAfter much digging around, I\u0026rsquo;ve realized that \u003cstrong\u003eI need to load Symfony\\Component\\Dotenv\\Dotenv in common/config/codeception-local.php\u003c/strong\u003e Thus, I have updated that file in the environment folder, and reran \u003cstrong\u003ephp init\u003c/strong\u003e.\u003c/p\u003e","title":"Yii 2 Codeception API Test"},{"content":"After setting up a new application using Yii 2 Advanced Project Template, the very first time you want to load your new controller, if you are met with a 404 Not Found, one very likely cause is that you do not have a .htaccess in your web folder.\n","permalink":"https://www.ytpor.com/2021/06/yii-2-found-oh-four-not-found.html","summary":"\u003cp\u003eAfter setting up a new application using Yii 2 Advanced Project Template, the very first time you want to load your new controller, if you are met with a 404 Not Found, one very likely cause is that you do not have a .htaccess in your web folder.\u003c/p\u003e","title":"Yii 2 Four oh Four Not Found"},{"content":"You might come across the below warning if you have not set a cache to your Yii2 application while using URL manager.\nUnable to use cache for URL manager: Failed to instantiate component or class \u0026#34;cache\u0026#34;. In order to remove that warning, setup a cache in your application\u0026rsquo;s configuration.\nWe are using the DummyCache class here as we have yet to decide on one that we want to use.\n\u0026#39;components\u0026#39; =\u0026gt; [ \u0026#39;cache\u0026#39; =\u0026gt; [ \u0026#39;class\u0026#39; =\u0026gt; \u0026#39;yii\\caching\\DummyCache\u0026#39;, // FIXME ], ], ","permalink":"https://www.ytpor.com/2020/04/yii2-url-manager-cache-class.html","summary":"\u003cp\u003eYou might come across the below warning if you have not set a cache to your Yii2 application while using URL manager.\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eUnable to use cache for URL manager: Failed to instantiate component or class \u0026#34;cache\u0026#34;.\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIn order to remove that warning, setup a cache in your application\u0026rsquo;s configuration.\u003c/p\u003e\n\u003cp\u003eWe are using the DummyCache class here as we have yet to decide on one that we want to use.\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e\u0026#39;components\u0026#39; =\u0026gt; [\n    \u0026#39;cache\u0026#39; =\u0026gt; [\n        \u0026#39;class\u0026#39; =\u0026gt; \u0026#39;yii\\caching\\DummyCache\u0026#39;, // FIXME\n    ],\n],\n\u003c/code\u003e\u003c/pre\u003e","title":"Yii2 URL manager cache class"},{"content":"Here\u0026rsquo;s a sample Yii2 FileTarget configuration (to be added to the application\u0026rsquo;s configuration) used for logging. This configuration overwrite the default log file location, doesn\u0026rsquo;t capture the global PHP variables and also, adds a prefix to the log entry.\n\u0026#39;bootstrap\u0026#39; =\u0026gt; [ \u0026#39;log\u0026#39;, ], \u0026#39;components\u0026#39; =\u0026gt; [ \u0026#39;log\u0026#39; =\u0026gt; [ \u0026#39;targets\u0026#39; =\u0026gt; [ [ \u0026#39;class\u0026#39; =\u0026gt; \u0026#39;yii\\log\\FileTarget\u0026#39;, \u0026#39;levels\u0026#39; =\u0026gt; [\u0026#39;error\u0026#39;, \u0026#39;info\u0026#39;], // Custom log file. Default log file will appear in @runtime/logs \u0026#39;logFile\u0026#39; =\u0026gt; dirname(__DIR__) . \u0026#39;/log/app.log\u0026#39;, // \u0026#39;logVars\u0026#39; =\u0026gt; [], // Custom prefix. \u0026#39;prefix\u0026#39; =\u0026gt; function ($message) { $request = Yii::$app-\u0026gt;getRequest(); $ip = $request instanceof yii\\base\\Request ? $request-\u0026gt;getUserIP() : \u0026#39;-\u0026#39;; $controller = Yii::$app-\u0026gt;controller-\u0026gt;id; $action = Yii::$app-\u0026gt;controller-\u0026gt;action-\u0026gt;id; return \u0026#34;[$ip][$controller][$action]\u0026#34;; } ], ], ], ], ","permalink":"https://www.ytpor.com/2020/04/yii2-log-using-filetarget.html","summary":"\u003cp\u003eHere\u0026rsquo;s a sample Yii2 FileTarget configuration (to be added to the application\u0026rsquo;s configuration) used for logging. This configuration overwrite the default log file location, doesn\u0026rsquo;t capture the global PHP variables and also, adds a prefix to the log entry.\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e\u0026#39;bootstrap\u0026#39; =\u0026gt; [\n    \u0026#39;log\u0026#39;,\n],\n\u0026#39;components\u0026#39; =\u0026gt; [\n    \u0026#39;log\u0026#39; =\u0026gt; [\n        \u0026#39;targets\u0026#39; =\u0026gt; [\n            [\n                \u0026#39;class\u0026#39; =\u0026gt; \u0026#39;yii\\log\\FileTarget\u0026#39;,\n                \u0026#39;levels\u0026#39; =\u0026gt; [\u0026#39;error\u0026#39;, \u0026#39;info\u0026#39;],\n                // Custom log file. Default log file will appear in @runtime/logs\n                \u0026#39;logFile\u0026#39; =\u0026gt; dirname(__DIR__) . \u0026#39;/log/app.log\u0026#39;,\n                //\n                \u0026#39;logVars\u0026#39; =\u0026gt; [],\n                // Custom prefix.\n                \u0026#39;prefix\u0026#39; =\u0026gt; function ($message) {\n                    $request = Yii::$app-\u0026gt;getRequest();\n                    $ip = $request instanceof yii\\base\\Request ? $request-\u0026gt;getUserIP() : \u0026#39;-\u0026#39;;\n                    $controller = Yii::$app-\u0026gt;controller-\u0026gt;id;\n                    $action = Yii::$app-\u0026gt;controller-\u0026gt;action-\u0026gt;id;\n                    return \u0026#34;[$ip][$controller][$action]\u0026#34;;\n                }\n            ],\n        ],\n    ],\n],\n\u003c/code\u003e\u003c/pre\u003e","title":"Yii2 Log using FileTarget"},{"content":"S3cmd is a command line tool that we\u0026rsquo;ve used for uploading, retrieving and managing data in Amazon S3. To install S3cmd, you just need to run the install command.\nyum install s3cmd ","permalink":"https://www.ytpor.com/2020/03/s3cmd-on-centos-7.html","summary":"\u003cp\u003eS3cmd is a command line tool that we\u0026rsquo;ve used for uploading, retrieving and managing data in Amazon S3.\nTo install S3cmd, you just need to run the install command.\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eyum install s3cmd\n\u003c/code\u003e\u003c/pre\u003e","title":"S3cmd on CentOS 7"},{"content":"My goal for this exercise is to have User and RBAC management in my Yii 2 application.\nI\u0026rsquo;ve started out with the Yii 2 Basic Project Template and I would be adding the Yii2-user and Yii2-rbac extensions to my web application.\nHere are some of the steps I have taken to install and configure the extensions.\nStep 1: Installation Install the packages.\ncomposer require dektrium/yii2-user composer require dektrium/yii2-rbac Step 2: Configure the web application NOTE: Make sure that you don\u0026rsquo;t have user component configuration in your config files. Add the user and rbac module to the web applcation config.\n\u0026#39;modules\u0026#39; =\u0026gt; [ ... \u0026#39;rbac\u0026#39; =\u0026gt; \u0026#39;dektrium\\rbac\\RbacWebModule\u0026#39;, \u0026#39;user\u0026#39; =\u0026gt; [ \u0026#39;class\u0026#39; =\u0026gt; \u0026#39;dektrium\\user\\Module\u0026#39;, ], ... ], Step 3: Configure the console application Add the user and rbac module to the console applcation config.\n\u0026#39;modules\u0026#39; =\u0026gt; [ ... \u0026#39;rbac\u0026#39; =\u0026gt; \u0026#39;dektrium\\rbac\\RbacConsoleModule\u0026#39;, \u0026#39;user\u0026#39; =\u0026gt; [ \u0026#39;class\u0026#39; =\u0026gt; \u0026#39;dektrium\\user\\Module\u0026#39;, ], ... ], Step 4: Update the database schema Update the database scheme\nphp yii migrate/up --migrationPath=@vendor/dektrium/yii2-user/migrations php yii migrate/up --migrationPath=@yii/rbac/migrations Step 5: Create Super User Create my first admin user\nphp yii user/create admin@myapp.com admin password ","permalink":"https://www.ytpor.com/2019/08/setup-user-and-rbac-management-in-yii2.html","summary":"\u003cp\u003eMy goal for this exercise is to have User and RBAC management in my Yii 2 application.\u003c/p\u003e\n\u003cp\u003eI\u0026rsquo;ve started out with the Yii 2 Basic Project Template and I would be adding the Yii2-user and Yii2-rbac extensions to my web application.\u003c/p\u003e\n\u003cp\u003eHere are some of the steps I have taken to install and configure the extensions.\u003c/p\u003e\n\u003ch3 id=\"step-1-installation\"\u003eStep 1: Installation\u003c/h3\u003e\n\u003cp\u003eInstall the packages.\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003ecomposer require dektrium/yii2-user\ncomposer require dektrium/yii2-rbac\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"step-2-configure-the-web-application\"\u003eStep 2: Configure the web application\u003c/h3\u003e\n\u003cp\u003eNOTE: Make sure that you don\u0026rsquo;t have user component configuration in your config files.\nAdd the user and rbac module to the web applcation config.\u003c/p\u003e","title":"Setup User and RBAC Management in Yii2"},{"content":"Here\u0026rsquo;s a vb script snippet that I have used to send Telegram message in a group from an Excel sheet.\nSub sendTelegramMessage() Set objHttp = CreateObject(\u0026#34;MSXML2.ServerXMLHTTP\u0026#34;) \u0026#39; Change these accordingly strChat = \u0026#34;\u0026lt;chat_id\u0026gt;\u0026#34; strText = \u0026#34;*Test*\\r\\nThis is a message\u0026#34; strUrl = \u0026#34;https://api.telegram.org/bot\u0026lt;token\u0026gt;/sendMessage\u0026#34; \u0026#39; Leave these alone strMode = \u0026#34;markdown\u0026#34; strJson = \u0026#34;{\u0026#34;\u0026#34;chat_id\u0026#34;\u0026#34;: \u0026#34;\u0026#34;\u0026#34; \u0026amp; strChat \u0026amp; \u0026#34;\u0026#34;\u0026#34;, \u0026#34;\u0026#34;text\u0026#34;\u0026#34;: \u0026#34;\u0026#34;\u0026#34; \u0026amp; strText \u0026amp; \u0026#34;\u0026#34;\u0026#34;, \u0026#34;\u0026#34;parse_mode\u0026#34;\u0026#34;: \u0026#34;\u0026#34;\u0026#34; \u0026amp; strMode \u0026amp; \u0026#34;\u0026#34;\u0026#34;}\u0026#34; objHttp.Open \u0026#34;POST\u0026#34;, strUrl, False objHttp.setRequestHeader \u0026#34;Content-type\u0026#34;, \u0026#34;application/json\u0026#34; objHttp.send strJson End Sub ","permalink":"https://www.ytpor.com/2018/08/send-telegram-message-in-group-using-vb.html","summary":"\u003cp\u003eHere\u0026rsquo;s a vb script snippet that I have used to send Telegram message in a group from an Excel sheet.\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eSub sendTelegramMessage()\n\nSet objHttp = CreateObject(\u0026#34;MSXML2.ServerXMLHTTP\u0026#34;)\n\u0026#39; Change these accordingly\nstrChat = \u0026#34;\u0026lt;chat_id\u0026gt;\u0026#34;\nstrText = \u0026#34;*Test*\\r\\nThis is a message\u0026#34;\nstrUrl = \u0026#34;https://api.telegram.org/bot\u0026lt;token\u0026gt;/sendMessage\u0026#34;\n\n\u0026#39; Leave these alone\nstrMode = \u0026#34;markdown\u0026#34;\nstrJson = \u0026#34;{\u0026#34;\u0026#34;chat_id\u0026#34;\u0026#34;: \u0026#34;\u0026#34;\u0026#34; \u0026amp; strChat \u0026amp; \u0026#34;\u0026#34;\u0026#34;, \u0026#34;\u0026#34;text\u0026#34;\u0026#34;: \u0026#34;\u0026#34;\u0026#34; \u0026amp; strText \u0026amp; \u0026#34;\u0026#34;\u0026#34;, \u0026#34;\u0026#34;parse_mode\u0026#34;\u0026#34;: \u0026#34;\u0026#34;\u0026#34; \u0026amp; strMode \u0026amp; \u0026#34;\u0026#34;\u0026#34;}\u0026#34;\n\nobjHttp.Open \u0026#34;POST\u0026#34;, strUrl, False\nobjHttp.setRequestHeader \u0026#34;Content-type\u0026#34;, \u0026#34;application/json\u0026#34;\nobjHttp.send strJson\n\nEnd Sub\n\u003c/code\u003e\u003c/pre\u003e","title":"Send Telegram Message in Group using VB Script"},{"content":"Often times, after a fresh install of WAMP server, curl stops working. You might get a hint of the issue in logs/php_error.log If not, it could be that the SSL/TLS Certificate Authority (CA) certificates has not bee setup properly.\nDownload cacert.pem Move the cacert.pem file to a folder, e.g. C:\\code\\ssl\\cacert.pem Edit the php.ini file and change the curl.cainfo parameter, e.g. curl.cainfo = \u0026ldquo;C:\\code\\ssl\\cacert.pem\u0026rdquo; ","permalink":"https://www.ytpor.com/2018/02/wamp-and-curl.html","summary":"\u003cp\u003eOften times, after a fresh install of WAMP server, curl stops working. You might get a hint of the issue in logs/php_error.log If not, it could be that the SSL/TLS Certificate Authority (CA) certificates has not bee setup properly.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eDownload \u003ca href=\"https://curl.haxx.se/ca/cacert.pem\"\u003ecacert.pem\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eMove the cacert.pem file to a folder, e.g. C:\\code\\ssl\\cacert.pem\u003c/li\u003e\n\u003cli\u003eEdit the php.ini file and change the curl.cainfo parameter, e.g. curl.cainfo = \u0026ldquo;C:\\code\\ssl\\cacert.pem\u0026rdquo;\u003c/li\u003e\n\u003c/ol\u003e","title":"WAMP and curl"},{"content":" Talk to @BotFather, and request to create a new bot. (hint: /help) Give the new bot a name, and a unique username. Take note of the bot token given by the @BotFather Add the new bot to a group. Run this - https://api.telegram.org/bot\u0026lt;bot_token\u0026gt;/getUpdates , to get the group\u0026rsquo;s chat id that contains the new bot. In the group, type /start @username to activate the new bot. ","permalink":"https://www.ytpor.com/2018/02/add-and-allow-new-telegram-bot-to-send.html","summary":"\u003col\u003e\n\u003cli\u003eTalk to @BotFather, and request to create a new bot. (hint: /help)\u003c/li\u003e\n\u003cli\u003eGive the new bot a name, and a unique username.\u003c/li\u003e\n\u003cli\u003eTake note of the bot token given by the @BotFather\u003c/li\u003e\n\u003cli\u003eAdd the new bot to a group.\u003c/li\u003e\n\u003cli\u003eRun this - \u003ca href=\"https://api.telegram.org/bot\"\u003ehttps://api.telegram.org/bot\u003c/a\u003e\u0026lt;bot_token\u0026gt;/getUpdates , to get the group\u0026rsquo;s chat id that contains the new bot.\u003c/li\u003e\n\u003cli\u003eIn the group, type /start @username to activate the new bot.\u003c/li\u003e\n\u003c/ol\u003e","title":"Add and Allow New Telegram Bot to Send Message in Group"},{"content":"This nginx configuration will allow you to run multiple instances of Yii2 in sub folders under the same domain. Eg. http://advanced.local/ and http://advanced.local/subfolder/\nserver { listen 80; # listen for IPv4 server_name advanced.local; set $root_path /var/www/main/web; root $root_path; index index.html index.php; charset utf-8; client_max_body_size 100M; location / { root $root_path; try_files $uri $uri/ /index.php$is_args$args; } location ~ \\.php$ { try_files $uri /$uri =404; fastcgi_pass unix:/var/run/php/php7.0-fpm.sock; include fastcgi_params; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; } location ^~ /subfolder { alias /var/www/subfolder/web; if (!-e $request_filename) { rewrite ^ /subfolder/index.php last; } location ~ \\.php$ { if (!-f $request_filename) { return 404; } include fastcgi_params; fastcgi_param SCRIPT_FILENAME $request_filename; fastcgi_pass unix:/var/run/php/php7.0-fpm.sock; } } location ~* \\.(htaccess|htpasswd|svn|git) { deny all; } } ","permalink":"https://www.ytpor.com/2017/12/nginx-configuration-for-multiple-yii2.html","summary":"\u003cp\u003eThis nginx configuration will allow you to run multiple instances of Yii2 in sub folders under the same domain. Eg. \u003ca href=\"http://advanced.local/\"\u003ehttp://advanced.local/\u003c/a\u003e and \u003ca href=\"http://advanced.local/subfolder/\"\u003ehttp://advanced.local/subfolder/\u003c/a\u003e\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eserver {\n    listen       80; # listen for IPv4\n    server_name  advanced.local;\n\n    set $root_path /var/www/main/web;\n    root        $root_path;\n    index       index.html index.php;\n\n    charset      utf-8;\n    client_max_body_size  100M;\n\n    location / {\n        root  $root_path;\n        try_files  $uri $uri/ /index.php$is_args$args;\n    }\n\n    location ~ \\.php$ {\n        try_files  $uri /$uri =404;\n        fastcgi_pass unix:/var/run/php/php7.0-fpm.sock;\n        include fastcgi_params;\n        fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;\n    }\n\n    location ^~ /subfolder {\n        alias /var/www/subfolder/web;\n\n        if (!-e $request_filename) { rewrite ^ /subfolder/index.php last; }\n\n        location ~ \\.php$ {\n            if (!-f $request_filename) { return 404; }\n\n            include        fastcgi_params;\n            fastcgi_param  SCRIPT_FILENAME $request_filename;\n            fastcgi_pass unix:/var/run/php/php7.0-fpm.sock;\n        }\n    }\n\n    location ~* \\.(htaccess|htpasswd|svn|git) {\n        deny all;\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e","title":"Nginx Configuration for Multiple Yii2 Site Under Same Domain"},{"content":"Assuming that you are on Magento version 2.0.6 and would like to upgrade to 2.0.7\ncomposer require magento/product-community-edition 2.0.7 --no-update composer update rm -rf var/di var/generation/* var/view_preprocessed/* var/cache/* var/page_cache php bin/magento cache:clean php bin/magento cache:flush php bin/magento setup:upgrade php bin/magento setup:di:compile php bin/magento indexer:reindex ","permalink":"https://www.ytpor.com/2017/02/magento-2-upgrade-ritual.html","summary":"\u003cp\u003eAssuming that you are on Magento version 2.0.6 and would like to upgrade to 2.0.7\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003ecomposer require magento/product-community-edition 2.0.7 --no-update\ncomposer update\nrm -rf var/di var/generation/* var/view_preprocessed/* var/cache/* var/page_cache\nphp bin/magento cache:clean\nphp bin/magento cache:flush\nphp bin/magento setup:upgrade\nphp bin/magento setup:di:compile\nphp bin/magento indexer:reindex\n\u003c/code\u003e\u003c/pre\u003e","title":"Magento 2 Upgrade Ritual"},{"content":"We have setup Amazon Cloudwatch alarms to keep track of various metrics. In a situation where a particular alarm is triggered, a notification is sent to a Amazon Notification Topic. Within that Amazon Notification Topic, one of the subcription uses the lambda protocol. It is through this subscription which we would get Amazon Lambda to send a message to Jaconda - a Telegram Smartbot.\nHere\u0026rsquo;s a sample Node.js script that we have used.\nconst https = require(\u0026#39;https\u0026#39;); const jacondaPath = process.env.jacondaPath; const jacondaToken = process.env.jacondaToken; const jacondaUrl = process.env.jacondaUrl; function postMessage(message) { jsonObject = JSON.stringify({ \u0026#39;token\u0026#39; : jacondaToken, \u0026#39;text\u0026#39; : message }); // prepare the header var postheaders = { \u0026#39;Content-Type\u0026#39; : \u0026#39;application/json\u0026#39;, \u0026#39;Content-Length\u0026#39; : Buffer.byteLength(jsonObject, \u0026#39;utf8\u0026#39;) }; // the post options var optionspost = { host : jacondaUrl, port : 443, path : jacondaPath, method : \u0026#39;POST\u0026#39;, headers : postheaders }; console.info(\u0026#39;Options prepared:\u0026#39;); console.info(optionspost); console.info(\u0026#39;Do the POST call\u0026#39;); // do the POST call var reqPost = https.request(optionspost, function(res) { console.log(\u0026#34;statusCode: \u0026#34;, res.statusCode); res.on(\u0026#39;data\u0026#39;, function(d) { console.info(\u0026#39;POST result:\\n\u0026#39;); process.stdout.write(d); console.info(\u0026#39;\\n\\nPOST completed\u0026#39;); }); }); // write the json data reqPost.write(jsonObject); reqPost.end(); reqPost.on(\u0026#39;error\u0026#39;, function(e) { console.error(e); }); } exports.handler = function(event, context, callback) { const message = event.Records[0].Sns.Message; console.log(\u0026#39;From SNS:\u0026#39;, message); callback(null, message); postMessage(message); } ","permalink":"https://www.ytpor.com/2017/02/we-have-setup-amazon-cloudwatch-alarms.html","summary":"\u003cp\u003eWe have setup Amazon Cloudwatch alarms to keep track of various metrics. In a situation where a particular alarm is triggered, a notification is sent to a Amazon Notification Topic. Within that Amazon Notification Topic, one of the subcription uses the lambda protocol. It is through this subscription which we would get Amazon Lambda to send a message to \u003ca href=\"https://jaconda.im/\"\u003eJaconda\u003c/a\u003e - a Telegram Smartbot.\u003c/p\u003e\n\u003cp\u003eHere\u0026rsquo;s a sample Node.js script that we have used.\u003c/p\u003e","title":"Amazon Cloudwatch alarm to Jaconda - a Telegram Smartbot"},{"content":"After a fresh install of RabbitMQ, I have encountered a Login Failed error when trying to access the RabbitMQ Management console at http://localhost:15672\nHere\u0026rsquo;s one possible solution to overcome this issue.\nCreate a file /etc/rabbitmq/rabbitmq.config, and add the below content into that file.\n[{rabbit, [{loopback_users, []}]}]. Restart the service to apply the changes.\n","permalink":"https://www.ytpor.com/2016/12/rabbitmq-can-not-login-with-guestguest.html","summary":"\u003cp\u003eAfter a fresh install of RabbitMQ, I have encountered a Login Failed error when trying to access the RabbitMQ Management console at http://localhost:15672\u003c/p\u003e\n\u003cp\u003eHere\u0026rsquo;s one possible solution to overcome this issue.\u003c/p\u003e\n\u003cp\u003eCreate a file \u003cstrong\u003e/etc/rabbitmq/rabbitmq.config\u003c/strong\u003e, and add the below content into that file.\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e[{rabbit, [{loopback_users, []}]}].\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eRestart the service to apply the changes.\u003c/p\u003e","title":"RabbitMQ can not login with guest/guest"},{"content":"S3cmd is a command line tool that we\u0026rsquo;ve used for uploading, retrieving and managing data in Amazon S3.\nTo install S3cmd, you would need to download the .repo for the tool, and then, run install.\ncd /etc/yum.repos.d wget http://s3tools.org/repo/RHEL_6/s3tools.repo yum install s3cmd Answer yes when asked to accept a new GPG key.\nNote: The latest version of s3cmd requires python 2.6. If you come across this error Problem: ImportError: No module named S3.Exceptions, chances are, you do not have the correct version. One work around is as follows:-\nvi /usr/bin/s3cmd Add 2.6 to the first line, so it looks like:\n#!/usr/bin/python2.6 ","permalink":"https://www.ytpor.com/2016/03/s3cmd-on-centos-6.html","summary":"\u003cp\u003eS3cmd is a command line tool that we\u0026rsquo;ve used for uploading, retrieving and managing data in Amazon S3.\u003c/p\u003e\n\u003cp\u003eTo install S3cmd, you would need to download the .repo for the tool, and then, run install.\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003ecd /etc/yum.repos.d\nwget http://s3tools.org/repo/RHEL_6/s3tools.repo\nyum install s3cmd\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAnswer yes when asked to accept a new GPG key.\u003c/p\u003e\n\u003cp\u003eNote: The latest version of s3cmd requires python 2.6. If you come across this error Problem: ImportError: No module named S3.Exceptions, chances are, you do not have the correct version. One work around is as follows:-\u003c/p\u003e","title":"S3cmd on CentOS 6"},{"content":"Here are some sample backup scripts that I\u0026rsquo;ve used to back up various things in our network. These scripts uses Amazon S3 as the storage, and also s3cmd.\nApplication #!/bin/sh # Site Backup script # # application_backup.sh # Initialize variables specific for this server # To exclude directory, update in code under Exclude directory LOG_FILE=\u0026#34;/var/log/site-backup.log\u0026#34; SITE_PATH=\u0026#34;/var/www/\u0026#34; SITE_BACKUP_PATH=\u0026#34;/var/script/backup\u0026#34; SITE=( name_of_directory_one name_of_directory_two ) # Definition TIMESTAMP=`date \u0026#34;+%Y-%m-%d %H:%M:%S\u0026#34;` CURRENT_YEAR=`date \u0026#34;+%Y\u0026#34;` CURRENT_MONTH=`date \u0026#34;+%Y-%m\u0026#34;` TODAY_DATE=`date \u0026#34;+%Y-%m-%d\u0026#34;` S3_PATH=s3://name-of-s3-bucket/application/${CURRENT_YEAR}/${CURRENT_MONTH} # Remove Site Backup older than 15 days /usr/bin/find ${SITE_BACKUP_PATH} -type f -mtime +15 -delete echo \u0026#34;Site Backup Log: \u0026#34; ${TIMESTAMP} \u0026gt;\u0026gt; ${LOG_FILE} echo -e \u0026#34;--------------------------------------------\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE} echo -e \u0026#34;\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE} # Loop through the Site Repository for i in ${SITE[@]} do # Exclude directory EXCLUDE=\u0026#39;\u0026#39; case $i in account.fxprimus.com) exclude=\u0026#34;--exclude api --exclude assets \\ --exclude nfiles --exclude nimages \\ --exclude nlanguages --exclude ntemplates\u0026#34;;; esac # Backup Site cd ${SITE_PATH} tar -zcf ${SITE_BACKUP_PATH}/$i-${TODAY_DATE}.tar.gz . ${EXCLUDE} # Transfer the file to Amazon S3 s3cmd put --acl-private --guess-mime-type \\ ${SITE_BACKUP_PATH}/$i-${TODAY_DATE}.tar.gz \\ ${S3_PATH}/$i-${TODAY_DATE}.tar.gz \u0026gt;\u0026gt; ${LOG_FILE} 2\u0026gt;\u0026amp;1 if [ \u0026#34;$?\u0026#34; -eq 1 ] then echo -e \u0026#34;***SITE BACKUP JOB, THERE WERE ERRORS***\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE} 2\u0026gt;\u0026amp;1 else echo -e \u0026#34;Script Completed Successfully!\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE} 2\u0026gt;\u0026amp;1 fi done MySQL #!/bin/sh # MySQL Backup script # # db_backup.sh # In summary, this is what is going to happen. # make directory # change directory # dump file # compress directory # remove directory # upload compressed file # Initialize variables specific for this server MYSQL_SOURCE_HOST=192.168.3.100 MYSQL_DATABASE=this_is_my_database MYSQL_SOURCE_USER=i_am_db_user MYSQL_SOURCE_PASS=i_am_db_password SRC_CONN=\u0026#34;-h${MYSQL_SOURCE_HOST} -u${MYSQL_SOURCE_USER} -p${MYSQL_SOURCE_PASS}\u0026#34; MYSQL_TABLE=( tbl_one tbl_two ) LOG_FILE=/var/log/mysql-backup.log MYSQL_BACKUP_PATH=/var/script/backup # Definition TIMESTAMP=`date \u0026#34;+%Y-%m-%d %H:%M:%S\u0026#34;` CURRENT_YEAR=`date \u0026#34;+%Y\u0026#34;` CURRENT_MONTH=`date \u0026#34;+%Y-%m\u0026#34;` TODAY_DATE=`date \u0026#34;+%Y-%m-%d\u0026#34;` EPOCH=`date +%s` S3_PATH=s3://name-of-s3-bucket/db/${CURRENT_YEAR}/${CURRENT_MONTH}/${TODAY_DATE} # Remove MySQL Backup older than 3 days /usr/bin/find ${MYSQL_BACKUP_PATH} -type f -mtime +3 -delete echo \u0026#34;MySQL Backup Log: \u0026#34; ${TIMESTAMP} \u0026gt;\u0026gt; ${LOG_FILE} echo -e \u0026#34;--------------------------------------------\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE} echo -e \u0026#34;\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE} MYSQLDUMP_OPTIONS=\u0026#34;--hex-blob --compress --lock-tables=false\u0026#34; # Loop through the tables for TBL in \u0026#34;${MYSQL_TABLE[@]}\u0026#34; do FILENAME=${TBL}-${TODAY_DATE}-${EPOCH} # Backup MySQL mysqldump ${SRC_CONN} ${MYSQLDUMP_OPTIONS} ${MYSQL_DATABASE} ${TBL} \\ \u0026gt; ${MYSQL_BACKUP_PATH}/${FILENAME}.sql # Compress today\u0026#39;s directory tar -zcf ${MYSQL_BACKUP_PATH}/${FILENAME}.tar.gz -C ${MYSQL_BACKUP_PATH} ${FILENAME}.sql # Transfer the file to Amazon S3 s3cmd put --acl-private --guess-mime-type \\ ${MYSQL_BACKUP_PATH}/${FILENAME}.tar.gz \\ ${S3_PATH}/${FILENAME}.tar.gz \u0026gt;\u0026gt; ${LOG_FILE} 2\u0026gt;\u0026amp;1 done if [ \u0026#34;$?\u0026#34; -eq 1 ] then echo -e \u0026#34;***MySQL BACKUP JOB, THERE WERE ERRORS***\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE} 2\u0026gt;\u0026amp;1 else echo -e \u0026#34;Script Completed Successfully!\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE} 2\u0026gt;\u0026amp;1 fi SVN Repository #!/bin/sh # SVN Off Site Backup script # # svn_backup.sh # Input from command line SVN_REPOSITORY=($1) # Definition TIMESTAMP=`date \u0026#34;+%Y-%m-%d %H:%M:%S\u0026#34;` CURRENT_YEAR=`date \u0026#34;+%Y\u0026#34;` CURRENT_MONTH=`date \u0026#34;+%Y-%m\u0026#34;` TODAY_DATE=`date \u0026#34;+%Y-%m-%d\u0026#34;` EPOCH=`date +%s` LOG_FILE=/var/log/svn-backup.log SVN_BACKUP_PATH=/var/script/backup SVN_PATH=/var/svn/repos S3_PATH=s3://name-of-s3-bucket/svn/${CURRENT_YEAR}/${CURRENT_MONTH} # Remove SVN Backup older than 7 days /usr/bin/find ${SVN_BACKUP_PATH} -type f -mtime +7 -delete echo \u0026#34;SVN Offsite Backup Log: \u0026#34; ${TIMESTAMP} \u0026gt;\u0026gt; ${LOG_FILE} echo -e \u0026#34;--------------------------------------------\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE} echo -e \u0026#34;\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE} # Loop through the SVN Repository for i in ${SVN_REPOSITORY[@]} do FILENAME=$i-${TODAY_DATE}-${EPOCH} # Backup SVN svnadmin dump ${SVN_PATH}/$i | gzip \u0026gt; ${SVN_BACKUP_PATH}/${FILENAME}.svndump.gz # Transfer the file to Amazon S3 s3cmd put --acl-private --guess-mime-type \\ ${SVN_BACKUP_PATH}/${FILENAME}.svndump.gz \\ ${S3_PATH}/${FILENAME}.svndump.gz \u0026gt;\u0026gt; ${LOG_FILE} 2\u0026gt;\u0026amp;1 if [ \u0026#34;$?\u0026#34; -eq 1 ] then echo -e \u0026#34;***SVN OFFSITE BACKUP JOB, THERE WERE ERRORS***\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE} 2\u0026gt;\u0026amp;1 else echo -e \u0026#34;Script Completed Successfully!\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE} 2\u0026gt;\u0026amp;1 fi done SVN Repository to Backup #!/bin/sh # SVN Repository to Backup # # call_backup.sh svn_repository=( my-project-number-one my-project-number-two my-project-number-three ) /var/script/svn_backup.sh \u0026#34;${svn_repository[*]}\u0026#34; ","permalink":"https://www.ytpor.com/2016/03/various-backup-scripts.html","summary":"\u003cp\u003eHere are some sample backup scripts that I\u0026rsquo;ve used to back up various things in our network. These scripts uses Amazon S3 as the storage, and also s3cmd.\u003c/p\u003e\n\u003ch3 id=\"application\"\u003eApplication\u003c/h3\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e#!/bin/sh\n# Site Backup script\n#\n# application_backup.sh\n\n# Initialize variables specific for this server\n# To exclude directory, update in code under Exclude directory\nLOG_FILE=\u0026#34;/var/log/site-backup.log\u0026#34;\nSITE_PATH=\u0026#34;/var/www/\u0026#34;\nSITE_BACKUP_PATH=\u0026#34;/var/script/backup\u0026#34;\nSITE=(\n name_of_directory_one\n name_of_directory_two\n)\n\n# Definition\nTIMESTAMP=`date \u0026#34;+%Y-%m-%d %H:%M:%S\u0026#34;`\nCURRENT_YEAR=`date \u0026#34;+%Y\u0026#34;`\nCURRENT_MONTH=`date \u0026#34;+%Y-%m\u0026#34;`\nTODAY_DATE=`date \u0026#34;+%Y-%m-%d\u0026#34;`\nS3_PATH=s3://name-of-s3-bucket/application/${CURRENT_YEAR}/${CURRENT_MONTH}\n\n# Remove Site Backup older than 15 days\n/usr/bin/find ${SITE_BACKUP_PATH} -type f -mtime +15 -delete\n\necho \u0026#34;Site Backup Log: \u0026#34; ${TIMESTAMP} \u0026gt;\u0026gt; ${LOG_FILE}\necho -e \u0026#34;--------------------------------------------\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE}\necho -e \u0026#34;\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE}\n\n# Loop through the Site Repository\nfor i in ${SITE[@]}\ndo\n # Exclude directory\n EXCLUDE=\u0026#39;\u0026#39;\n case $i in\n  account.fxprimus.com) exclude=\u0026#34;--exclude api --exclude assets \\\n   --exclude nfiles --exclude nimages \\\n   --exclude nlanguages --exclude ntemplates\u0026#34;;;\n esac\n\n # Backup Site\n cd ${SITE_PATH}\n tar -zcf ${SITE_BACKUP_PATH}/$i-${TODAY_DATE}.tar.gz . ${EXCLUDE}\n\n # Transfer the file to Amazon S3\n s3cmd put --acl-private --guess-mime-type \\\n  ${SITE_BACKUP_PATH}/$i-${TODAY_DATE}.tar.gz \\\n  ${S3_PATH}/$i-${TODAY_DATE}.tar.gz \u0026gt;\u0026gt; ${LOG_FILE} 2\u0026gt;\u0026amp;1\n\n if [ \u0026#34;$?\u0026#34; -eq 1 ]\n then\n  echo -e \u0026#34;***SITE BACKUP JOB, THERE WERE ERRORS***\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE} 2\u0026gt;\u0026amp;1\n else\n  echo -e \u0026#34;Script Completed Successfully!\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE} 2\u0026gt;\u0026amp;1\n fi\ndone\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"mysql\"\u003eMySQL\u003c/h3\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e#!/bin/sh\n# MySQL Backup script\n#\n# db_backup.sh\n\n# In summary, this is what is going to happen.\n# make directory\n# change directory\n# dump file\n# compress directory\n# remove directory\n# upload compressed file\n\n# Initialize variables specific for this server\nMYSQL_SOURCE_HOST=192.168.3.100\nMYSQL_DATABASE=this_is_my_database\nMYSQL_SOURCE_USER=i_am_db_user\nMYSQL_SOURCE_PASS=i_am_db_password\nSRC_CONN=\u0026#34;-h${MYSQL_SOURCE_HOST} -u${MYSQL_SOURCE_USER} -p${MYSQL_SOURCE_PASS}\u0026#34;\nMYSQL_TABLE=(\n tbl_one\n tbl_two\n)\n\nLOG_FILE=/var/log/mysql-backup.log\nMYSQL_BACKUP_PATH=/var/script/backup\n\n# Definition\nTIMESTAMP=`date \u0026#34;+%Y-%m-%d %H:%M:%S\u0026#34;`\nCURRENT_YEAR=`date \u0026#34;+%Y\u0026#34;`\nCURRENT_MONTH=`date \u0026#34;+%Y-%m\u0026#34;`\nTODAY_DATE=`date \u0026#34;+%Y-%m-%d\u0026#34;`\nEPOCH=`date +%s`\nS3_PATH=s3://name-of-s3-bucket/db/${CURRENT_YEAR}/${CURRENT_MONTH}/${TODAY_DATE}\n\n# Remove MySQL Backup older than 3 days\n/usr/bin/find ${MYSQL_BACKUP_PATH} -type f -mtime +3 -delete\n\necho \u0026#34;MySQL Backup Log: \u0026#34; ${TIMESTAMP} \u0026gt;\u0026gt; ${LOG_FILE}\necho -e \u0026#34;--------------------------------------------\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE}\necho -e \u0026#34;\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE}\n\nMYSQLDUMP_OPTIONS=\u0026#34;--hex-blob --compress --lock-tables=false\u0026#34;\n# Loop through the tables\nfor TBL in \u0026#34;${MYSQL_TABLE[@]}\u0026#34;\ndo\n FILENAME=${TBL}-${TODAY_DATE}-${EPOCH}\n # Backup MySQL\n mysqldump ${SRC_CONN} ${MYSQLDUMP_OPTIONS} ${MYSQL_DATABASE} ${TBL} \\\n  \u0026gt; ${MYSQL_BACKUP_PATH}/${FILENAME}.sql\n # Compress today\u0026#39;s directory\n tar -zcf ${MYSQL_BACKUP_PATH}/${FILENAME}.tar.gz -C ${MYSQL_BACKUP_PATH} ${FILENAME}.sql\n # Transfer the file to Amazon S3\n s3cmd put --acl-private --guess-mime-type \\\n  ${MYSQL_BACKUP_PATH}/${FILENAME}.tar.gz \\\n  ${S3_PATH}/${FILENAME}.tar.gz \u0026gt;\u0026gt; ${LOG_FILE} 2\u0026gt;\u0026amp;1\ndone\n\nif [ \u0026#34;$?\u0026#34; -eq 1 ]\nthen\n echo -e \u0026#34;***MySQL BACKUP JOB, THERE WERE ERRORS***\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE} 2\u0026gt;\u0026amp;1\nelse\n echo -e \u0026#34;Script Completed Successfully!\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE} 2\u0026gt;\u0026amp;1\nfi\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"svn-repository\"\u003eSVN Repository\u003c/h3\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e#!/bin/sh\n# SVN Off Site Backup script\n#\n# svn_backup.sh\n\n# Input from command line\nSVN_REPOSITORY=($1)\n\n# Definition\nTIMESTAMP=`date \u0026#34;+%Y-%m-%d %H:%M:%S\u0026#34;`\nCURRENT_YEAR=`date \u0026#34;+%Y\u0026#34;`\nCURRENT_MONTH=`date \u0026#34;+%Y-%m\u0026#34;`\nTODAY_DATE=`date \u0026#34;+%Y-%m-%d\u0026#34;`\nEPOCH=`date +%s`\nLOG_FILE=/var/log/svn-backup.log\nSVN_BACKUP_PATH=/var/script/backup\nSVN_PATH=/var/svn/repos\nS3_PATH=s3://name-of-s3-bucket/svn/${CURRENT_YEAR}/${CURRENT_MONTH}\n\n# Remove SVN Backup older than 7 days\n/usr/bin/find ${SVN_BACKUP_PATH} -type f -mtime +7 -delete\n\necho \u0026#34;SVN Offsite Backup Log: \u0026#34; ${TIMESTAMP} \u0026gt;\u0026gt; ${LOG_FILE}\necho -e \u0026#34;--------------------------------------------\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE}\necho -e \u0026#34;\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE}\n\n# Loop through the SVN Repository\nfor i in ${SVN_REPOSITORY[@]}\ndo\n FILENAME=$i-${TODAY_DATE}-${EPOCH}\n # Backup SVN\n svnadmin dump ${SVN_PATH}/$i | gzip \u0026gt; ${SVN_BACKUP_PATH}/${FILENAME}.svndump.gz\n\n # Transfer the file to Amazon S3\n s3cmd put --acl-private --guess-mime-type \\\n  ${SVN_BACKUP_PATH}/${FILENAME}.svndump.gz \\\n  ${S3_PATH}/${FILENAME}.svndump.gz \u0026gt;\u0026gt; ${LOG_FILE} 2\u0026gt;\u0026amp;1\n\n if [ \u0026#34;$?\u0026#34; -eq 1 ]\n then\n        echo -e \u0026#34;***SVN OFFSITE BACKUP JOB, THERE WERE ERRORS***\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE} 2\u0026gt;\u0026amp;1\n else\n         echo -e \u0026#34;Script Completed Successfully!\u0026#34; \u0026gt;\u0026gt; ${LOG_FILE} 2\u0026gt;\u0026amp;1\n fi\ndone\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"svn-repository-to-backup\"\u003eSVN Repository to Backup\u003c/h3\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e#!/bin/sh\n# SVN Repository to Backup\n#\n# call_backup.sh\n\nsvn_repository=(\n my-project-number-one\n my-project-number-two\n my-project-number-three\n)\n\n/var/script/svn_backup.sh \u0026#34;${svn_repository[*]}\u0026#34;\n\u003c/code\u003e\u003c/pre\u003e","title":"Various Backup Scripts"},{"content":"Csync2 is a cluster synchronization tool. It can be used to keep files on multiple hosts in a cluster in sync. Csync2 can handle complex setups with much more than just 2 hosts, handle file deletions and can detect conflicts.\nInstallation Build and Install csycn2 by running the below script - build-csync2.sh\n#!/bin/sh # build-csync2.sh # Make directory to store csync2 related mkdir -p /data/build/ mkdir -p /data/sync-db/ mkdir -p /data/logs/csync2 mkdir -p /data/sync-conflicts/ cd /data/build/ # Get the files from our own file repository wget http://downloads.sourceforge.net/librsync/librsync-0.9.7.tar.gz wget http://oss.linbit.com/csync2/csync2-2.0.tar.gz # Install the packages required to compile csync2 yum install xinetd byacc flex gcc-c++ gnutls gnutls-devel openssl-devel openssl-static sqlite-devel -y # Untar the files tar -xzf librsync-0.9.7.tar.gz tar -xzf csync2-2.0.tar.gz # Build csync2 cd /data/build/csync2-2.0 ./configure \\ --prefix=/usr \\ --with-librsync-source=/data/build/librsync-0.9.7.tar.gz \\ --localstatedir=/var \\ --sysconfdir=/etc \\ --disable-gnutls make \u0026amp;\u0026amp; make install # Remove the directories that we no longer need cd .. rm -rf librsync-0.9.7 rm -rf csync2-2.0 # Add the csync2 port number to /etc/services echo \u0026#34;csync2 30865/tcp\u0026#34; \u0026gt;\u0026gt; /etc/services CSYNCLOC=`which csync2` # Create a xinted definition file for csync2 echo -e \u0026#34;# default: on\\n# description: csync2 xinetd server\\n\\nservice csync2\\n{\\n disable = no\\n flags = REUSE\\n socket_type = stream\\n wait = no\\n user = root\\n group = root\\n server = $CSYNCLOC\\n server_args = -i -D /data/sync-db/\\n port = 30865\\n type = UNLISTED\\n log_type = FILE /data/logs/csync2/csync2-xinetd.log\\n log_on_failure += USERID\\n}\\n\u0026#34; \u0026gt; /etc/xinetd.d/csync2 # Restart the service to include the newly created definition service xinetd restart Setup First, generate ONE self-signed SSL certificate that would be used by your cluster.\nopenssl genrsa -out /etc/csync2_ssl_key.pem 1024 openssl req -new -key /etc/csync2_ssl_key.pem -out /etc/csync2_ssl_cert.csr Answer these questions.\nCountry Name (2 letter code) [XX]:CY State or Province Name (full name) []:CY Locality Name (eg, city) [Default City]:CY Organization Name (eg, company) [Default Company Ltd]:Acme Limited Organizational Unit Name (eg, section) []: Common Name (eg, your name or your server\u0026#39;s hostname) []: Email Address []: Please enter the following \u0026#39;extra\u0026#39; attributes to be sent with your certificate request A challenge password []: An optional company name []:Acme Limited openssl x509 -req -days 600 -in /etc/csync2_ssl_cert.csr -signkey /etc/csync2_ssl_key.pem -out /etc/csync2_ssl_cert.pem Create the csync2 key file\ncsync2 -k /etc/csync2-production.key Sample configuration You can find the the configuration file at /etc/csync2.cfg. All servers in this cluster MUST have the same configuration.\nnossl * *; group test { host ip-10-0-0-99; host (ip-10-0-1-119); key /etc/csync2-production.key; include /var/www/html; exclude /var/www/html/configuration; auto none; } Sample hosts file The hosts file can be found at /etc/hosts\n54.72.31.23 ip-10-0-0-99 52.91.3.112 ip-10-0-1-119 Note: ip-10-0-0-99 can be found by running hostname on the server. This must be used.\nSample cron entry */5 * * * * /usr/sbin/csync2 -x -v -D /data/sync-db/ \u0026gt;/dev/null 2\u0026gt;\u0026amp;1 References LINBIT Open Source Software - csync2 Synchronising files amongst your cloud nodes with Csync2 - It’s as easy as 1,2,3 ","permalink":"https://www.ytpor.com/2016/03/csync2-installation-and-setup.html","summary":"\u003cp\u003eCsync2 is a cluster synchronization tool. It can be used to keep files on multiple hosts in a cluster in sync. Csync2 can handle complex setups with much more than just 2 hosts, handle file deletions and can detect conflicts.\u003c/p\u003e\n\u003ch3 id=\"installation\"\u003eInstallation\u003c/h3\u003e\n\u003cp\u003eBuild and Install csycn2 by running the below script - build-csync2.sh\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e#!/bin/sh\n# build-csync2.sh\n\n# Make directory to store csync2 related\nmkdir -p /data/build/\nmkdir -p /data/sync-db/\nmkdir -p /data/logs/csync2\nmkdir -p /data/sync-conflicts/\n\ncd /data/build/\n\n# Get the files from our own file repository\nwget http://downloads.sourceforge.net/librsync/librsync-0.9.7.tar.gz\nwget http://oss.linbit.com/csync2/csync2-2.0.tar.gz\n\n# Install the packages required to compile csync2\nyum install xinetd byacc flex gcc-c++ gnutls gnutls-devel openssl-devel openssl-static sqlite-devel -y\n\n# Untar the files\ntar -xzf librsync-0.9.7.tar.gz\ntar -xzf csync2-2.0.tar.gz\n\n# Build csync2\ncd /data/build/csync2-2.0\n./configure \\\n    --prefix=/usr \\\n    --with-librsync-source=/data/build/librsync-0.9.7.tar.gz \\\n    --localstatedir=/var \\\n    --sysconfdir=/etc \\\n    --disable-gnutls\nmake \u0026amp;\u0026amp; make install\n\n# Remove the directories that we no longer need\ncd ..\nrm -rf librsync-0.9.7\nrm -rf csync2-2.0\n\n# Add the csync2 port number to /etc/services\necho \u0026#34;csync2        30865/tcp\u0026#34; \u0026gt;\u0026gt; /etc/services\n\nCSYNCLOC=`which csync2`\n\n# Create a xinted definition file for csync2\necho -e \u0026#34;# default: on\\n# description: csync2 xinetd server\\n\\nservice csync2\\n{\\n       disable         = no\\n       flags           = REUSE\\n       socket_type     = stream\\n       wait            = no\\n       user            = root\\n       group           = root\\n       server          = $CSYNCLOC\\n       server_args     = -i -D /data/sync-db/\\n       port            = 30865\\n       type            = UNLISTED\\n       log_type        = FILE /data/logs/csync2/csync2-xinetd.log\\n       log_on_failure  += USERID\\n}\\n\u0026#34; \u0026gt; /etc/xinetd.d/csync2\n\n# Restart the service to include the newly created definition\nservice xinetd restart\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"setup\"\u003eSetup\u003c/h3\u003e\n\u003cp\u003eFirst, generate ONE self-signed SSL certificate that would be used by your cluster.\u003c/p\u003e","title":"csync2 Installation and Setup"},{"content":"Here\u0026rsquo;s how you can easily setup FTP on CentOS\nyum install vsftpd Added these to the security group if you are running AWS EC2\nAdd port range 20-21 Add port range 1024-1048\nvi /etc/vsftpd/vsftpd.conf Set anonymous_enable=NO Set chroot_local_user=YES Add these\npasv_enable=YES pasv_min_port=1024 pasv_max_port=1048 pasv_address=\u0026lt;Public IP of your instance\u0026gt; sudo service vsftpd restart To make sure that the service is started on reboot\nchkconfig --level 345 vsftpd on Create new FTP User\nuseradd -d /path/to/new/home/dir -G apache userNameHere chown userNameHere:apache /path/to/new/home/dir passwd userNameHere The log file can be found in /var/log/xferlog\n","permalink":"https://www.ytpor.com/2016/03/running-ftp-on-centos.html","summary":"\u003cp\u003eHere\u0026rsquo;s how you can easily setup FTP on CentOS\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eyum install vsftpd\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAdded these to the security group if you are running AWS EC2\u003c/p\u003e\n\u003cp\u003eAdd port range 20-21\nAdd port range 1024-1048\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003evi /etc/vsftpd/vsftpd.conf\n\u003c/code\u003e\u003c/pre\u003e\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eSet anonymous_enable=NO\nSet chroot_local_user=YES\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAdd these\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003epasv_enable=YES\npasv_min_port=1024\npasv_max_port=1048\npasv_address=\u0026lt;Public IP of your instance\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cpre tabindex=\"0\"\u003e\u003ccode\u003esudo service vsftpd restart\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eTo make sure that the service is started on reboot\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003echkconfig --level 345 vsftpd on\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eCreate new FTP User\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003euseradd -d /path/to/new/home/dir -G apache userNameHere\nchown userNameHere:apache /path/to/new/home/dir\npasswd userNameHere\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe log file can be found in /var/log/xferlog\u003c/p\u003e","title":"Running FTP on CentOS"},{"content":"We have setup our SVN to be accessed through http with the help of Apache. Here\u0026rsquo;s a sample configuration that we have used.\nvi /etc/httpd/conf.d/vhosts.conf Add the below into subversion.conf\n\u0026lt;VirtualHost *:443\u0026gt; ServerName svn.mydomain.com DocumentRoot /var/www/svn.mydomain.com \u0026lt;Directory /var/www/svn.mydomain.com\u0026gt; AllowOverride All Order Allow,Deny Allow from all Options -Indexes Require all granted \u0026lt;/Directory\u0026gt; \u0026lt;Location /repos/newrepository\u0026gt; DAV svn SVNPath /var/svn/repos/newrepository AuthName \u0026#34;Subversion repository\u0026#34; AuthType Digest AuthUserFile /var/svn/svn-auth.htdigest AuthzSVNAccessFile /var/svn/svn-acl.conf Require valid-user \u0026lt;/Location\u0026gt; SSLEngine on SSLProtocol all SSLCertificateFile /etc/pki/tls/certs/ca.svn.mydomain.com.crt SSLCertificateKeyFile /etc/pki/tls/private/ca.svn.mydomain.com.key ErrorLog /var/log/httpd/svn.mydomain.com-error_log CustomLog /var/log/httpd/svn.mydomain.com-access_log combined \u0026lt;/VirtualHost\u0026gt; You can create a new SVN user by using the command below. This would store the encrypted password into svn-auth.htdigest\nUse this if the file does not exist.\nhtdigest -c /var/svn/svn-auth.htdigest \u0026#34;Subversion repository\u0026#34; newuser Otherwise, use the below.\nhtdigest /var/svn/svn-auth.htdigest \u0026#34;Subversion repository\u0026#34; newuser Upon creating the new SVN user, remember to update the SVN ACL.\nvi /var/svn/svn-acl.conf [groups] newrepository_group = existinguser, newuser [newrepository:/] @newrepository_group = rw Next, create the actual repository.\ncd /var/svn/repos svnadmin create newrepository chown apache:apache newrepository service httpd restart ","permalink":"https://www.ytpor.com/2016/03/svn-users-and-repositories.html","summary":"\u003cp\u003eWe have setup our SVN to be accessed through http with the help of Apache.\nHere\u0026rsquo;s a sample configuration that we have used.\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003evi /etc/httpd/conf.d/vhosts.conf\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAdd the below into subversion.conf\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e\u0026lt;VirtualHost *:443\u0026gt;\n  ServerName svn.mydomain.com\n  DocumentRoot /var/www/svn.mydomain.com\n\n  \u0026lt;Directory /var/www/svn.mydomain.com\u0026gt;\n    AllowOverride All\n    Order Allow,Deny\n    Allow from all\n    Options -Indexes\n    Require all granted\n  \u0026lt;/Directory\u0026gt;\n\n  \u0026lt;Location /repos/newrepository\u0026gt;\n    DAV svn\n    SVNPath /var/svn/repos/newrepository\n    AuthName \u0026#34;Subversion repository\u0026#34;\n    AuthType Digest\n    AuthUserFile /var/svn/svn-auth.htdigest\n    AuthzSVNAccessFile /var/svn/svn-acl.conf\n    Require valid-user\n  \u0026lt;/Location\u0026gt;\n\n  SSLEngine on\n  SSLProtocol all\n  SSLCertificateFile /etc/pki/tls/certs/ca.svn.mydomain.com.crt\n  SSLCertificateKeyFile /etc/pki/tls/private/ca.svn.mydomain.com.key\n\n  ErrorLog /var/log/httpd/svn.mydomain.com-error_log\n  CustomLog /var/log/httpd/svn.mydomain.com-access_log combined\n\u0026lt;/VirtualHost\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eYou can create a new SVN user by using the command below. This would store the encrypted password into svn-auth.htdigest\u003c/p\u003e","title":"SVN Users and Repositories"},{"content":"We have an application written in Yii. Up til this point, it has been manually tested. Since it\u0026rsquo;s more efficient to automate the testing of this application, we have decided to set up Codeception to assist us with this task.\nSet up was easy and straight forward - this said after spending countless hours understanding the correct way to set it up.\nTo illustrate the set up process, we\u0026rsquo;ll create a skeleton Yii app.\nphp /path/to/yii/framework/yiic.php webapp /path/to/webapp Next, download a copy of codecept.phar and put it in /path/to/webapp/protected, and run this\ncd /path/to/webapp/protected php codecept.phar bootstrap Various files would be created in /path/to/webapp/protected/tests\nLook up the file /path/to/webapp/protected/tests/acceptance.suite.yml and update url to http://localhost/webapp\nYou might not believe it, but set up is done. We\u0026rsquo;ll proceed to verify our set up has been done correctly.\nCreate a file LoginCept.php in /path/to/webapp/protected/tests/acceptance\n\u0026lt;?php $I = new AcceptanceTester($scenario); $I-\u0026gt;wantTo(\u0026#39;Test index page\u0026#39;); $I-\u0026gt;amOnPage(\u0026#39;/index.php\u0026#39;); $I-\u0026gt;see(\u0026#39;My Web Application\u0026#39;,\u0026#39;#header #logo\u0026#39;); $I-\u0026gt;click(\u0026#39;Login\u0026#39;); $I-\u0026gt;see(\u0026#39;Login\u0026#39;,\u0026#39;h1\u0026#39;); $I-\u0026gt;see(\u0026#39;Username\u0026#39;); $I-\u0026gt;fillField(\u0026#39;#LoginForm_username\u0026#39;,\u0026#39;demo\u0026#39;); $I-\u0026gt;fillField(\u0026#39;#LoginForm_password\u0026#39;,\u0026#39;demo\u0026#39;); $I-\u0026gt;click(\u0026#39;#login-form input[type=\u0026#34;submit\u0026#34;]\u0026#39;); $I-\u0026gt;seeLink(\u0026#39;Logout (demo)\u0026#39;); $I-\u0026gt;click(\u0026#39;Logout (demo)\u0026#39;); $I-\u0026gt;seeLink(\u0026#39;Login\u0026#39;); Run the acceptance test.\ncd /path/to/webapp/protected php codecept.phar run acceptance You should see this OK (1 test, 5 assertions) if the setup and test went according to plan.\nReferences https://github.com/Codeception/Codeception http://codeception.com/docs/modules/Yii1\n","permalink":"https://www.ytpor.com/2016/02/testing-yii-with-codeception.html","summary":"\u003cp\u003eWe have an application written in Yii. Up til this point, it has been manually tested. Since it\u0026rsquo;s more efficient to automate the testing of this application, we have decided to set up Codeception to assist us with this task.\u003c/p\u003e\n\u003cp\u003eSet up was easy and straight forward - this said after spending countless hours understanding the correct way to set it up.\u003c/p\u003e\n\u003cp\u003eTo illustrate the set up process, we\u0026rsquo;ll create a skeleton Yii app.\u003c/p\u003e","title":"Testing Yii with Codeception"},{"content":"As per the subject, migrating a blog from Wordpress to Blogger isn\u0026rsquo;t as hard as most would have imagined, On the down side, it\u0026rsquo;s a bit tedious if you have stored your images with your Wordpress blog. For my case, I have always stored my images on Picasa Web, so, I need not go through the process of copying the images out from the Wordpress blog.\nHere\u0026rsquo;s the straight forward process of exporting your Wordpress blog into Blogger.\nFrom Wordpress, go to Tools \u0026gt; Export, Download Export File On Blogger, Settings \u0026gt; Other \u0026gt; Blog tools \u0026gt; Import Blog That\u0026rsquo;s about it.\nWith your blog posts, comments and categories (this will be converted to tags), and tags imported, you might have to go through each of your posts to do some clean up. Take note that the Category concept does not exists in Blogger. If you need to put your posts under a category, you would have to substitute it with a tag.\nOne other thing. Blogger does not have a .htaccess like how you would have it in Wordpress. If you need to redirect your old URLs to the new ones, you can achieve it by going to Settings \u0026gt; Search preferences \u0026gt; Errors and redirections \u0026gt; Custom Redirects.\n","permalink":"https://www.ytpor.com/2016/01/what-ive-learnt-migrating-blog-from.html","summary":"\u003cp\u003eAs per the subject, migrating a blog from Wordpress to Blogger isn\u0026rsquo;t as hard as most would have imagined, On the down side, it\u0026rsquo;s a bit tedious if you have stored your images with your Wordpress blog. For my case, I have always stored my images on Picasa Web, so, I need not go through the process of copying the images out from the Wordpress blog.\u003c/p\u003e\n\u003cp\u003eHere\u0026rsquo;s the straight forward process of exporting your Wordpress blog into Blogger.\u003c/p\u003e","title":"What I've Learnt Migrating a Blog from Wordpress to Blogger"},{"content":"Knowledge gained through hard work or experience are meant to be shared. You might think that holding on to this knowledge would make you indispensable, or by sharing, it would jeopardize your position since someone else can do it.\nYet, have you considered the possibility that you have limited yourself to the scope of this work? You\u0026rsquo;ll end up being the person doing it all the time, and losing the chance to gain new knowledge and experience.\nOn the other hand, if the same knowledge was being shared and passed along, you would have achieved a few things with a single stroke - you would have trained some possible successors that can take over the work, and you have freed yourself to work on and experience something new.\n","permalink":"https://www.ytpor.com/2016/01/share-your-knowledge-and-pass-it-along.html","summary":"\u003cp\u003eKnowledge gained through hard work or experience are meant to be shared. You might think that holding on to this knowledge would make you indispensable, or by sharing, it would jeopardize your position since someone else can do it.\u003c/p\u003e\n\u003cp\u003eYet, have you considered the possibility that you have limited yourself to the scope of this work? You\u0026rsquo;ll end up being the person doing it all the time, and losing the chance to gain new knowledge and experience.\u003c/p\u003e","title":"Share Your Knowledge and Pass It Along"},{"content":"I\u0026rsquo;m a code writer, observer, handyman, researcher, motivator, consultant and photographer.\n","permalink":"https://www.ytpor.com/about/","summary":"\u003cp\u003eI\u0026rsquo;m a code writer, observer, handyman, researcher, motivator, consultant and photographer.\u003c/p\u003e","title":"About"}]