<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.147.6"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>YT Por</title><meta name=description content><meta name=author content><link rel=canonical href=https://www.ytpor.com/><link crossorigin=anonymous href=/assets/css/stylesheet.1d79e034ed3fae3cce466e1b13b697315f9998d1ba8d908def178611b372b49f.css integrity="sha256-HXngNO0/rjzORm4bE7aXMV+ZmNG6jZCN7xeGEbNytJ8=" rel="preload stylesheet" as=style><link rel=icon href=https://www.ytpor.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.ytpor.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.ytpor.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.ytpor.com/apple-touch-icon.png><link rel=mask-icon href=https://www.ytpor.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://www.ytpor.com/index.xml><link rel=alternate type=application/json href=https://www.ytpor.com/index.json><link rel=alternate hreflang=en href=https://www.ytpor.com/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-3V2PB7JNZW"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3V2PB7JNZW")}</script><meta property="og:url" content="https://www.ytpor.com/"><meta property="og:site_name" content="YT Por"><meta property="og:title" content="YT Por"><meta property="og:locale" content="en-us"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="YT Por"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"YT Por","url":"https://www.ytpor.com/","description":"","logo":"https://www.ytpor.com/favicon.ico","sameAs":["https://github.com/ytpor/","https://www.linkedin.com/in/yt-por-081243aa/"]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.ytpor.com/ accesskey=h title="YT Por (Alt + H)">YT Por</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.ytpor.com/about/ title=About><span>About</span></a></li><li><a href=https://www.ytpor.com/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://www.ytpor.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://www.ytpor.com/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>S3cmd on CentOS 6</h2></header><div class=entry-content><p>S3cmd is a command line tool that we’ve used for uploading, retrieving and managing data in Amazon S3.
To install S3cmd, you would need to download the .repo for the tool, and then, run install.
cd /etc/yum.repos.d wget http://s3tools.org/repo/RHEL_6/s3tools.repo yum install s3cmd Answer yes when asked to accept a new GPG key.
Note: The latest version of s3cmd requires python 2.6. If you come across this error Problem: ImportError: No module named S3.Exceptions, chances are, you do not have the correct version. One work around is as follows:-
...</p></div><footer class=entry-footer><span title='2016-03-30 12:00:00 +0800 +0800'>March 30, 2016</span></footer><a class=entry-link aria-label="post link to S3cmd on CentOS 6" href=https://www.ytpor.com/2016/03/s3cmd-on-centos-6.html></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Various Backup Scripts</h2></header><div class=entry-content><p>Here are some sample backup scripts that I’ve used to back up various things in our network. These scripts uses Amazon S3 as the storage, and also s3cmd.
Application #!/bin/sh # Site Backup script # # application_backup.sh # Initialize variables specific for this server # To exclude directory, update in code under Exclude directory LOG_FILE="/var/log/site-backup.log" SITE_PATH="/var/www/" SITE_BACKUP_PATH="/var/script/backup" SITE=( name_of_directory_one name_of_directory_two ) # Definition TIMESTAMP=`date "+%Y-%m-%d %H:%M:%S"` CURRENT_YEAR=`date "+%Y"` CURRENT_MONTH=`date "+%Y-%m"` TODAY_DATE=`date "+%Y-%m-%d"` S3_PATH=s3://name-of-s3-bucket/application/${CURRENT_YEAR}/${CURRENT_MONTH} # Remove Site Backup older than 15 days /usr/bin/find ${SITE_BACKUP_PATH} -type f -mtime +15 -delete echo "Site Backup Log: " ${TIMESTAMP} >> ${LOG_FILE} echo -e "--------------------------------------------" >> ${LOG_FILE} echo -e "" >> ${LOG_FILE} # Loop through the Site Repository for i in ${SITE[@]} do # Exclude directory EXCLUDE='' case $i in account.fxprimus.com) exclude="--exclude api --exclude assets \ --exclude nfiles --exclude nimages \ --exclude nlanguages --exclude ntemplates";; esac # Backup Site cd ${SITE_PATH} tar -zcf ${SITE_BACKUP_PATH}/$i-${TODAY_DATE}.tar.gz . ${EXCLUDE} # Transfer the file to Amazon S3 s3cmd put --acl-private --guess-mime-type \ ${SITE_BACKUP_PATH}/$i-${TODAY_DATE}.tar.gz \ ${S3_PATH}/$i-${TODAY_DATE}.tar.gz >> ${LOG_FILE} 2>&amp;1 if [ "$?" -eq 1 ] then echo -e "***SITE BACKUP JOB, THERE WERE ERRORS***" >> ${LOG_FILE} 2>&amp;1 else echo -e "Script Completed Successfully!" >> ${LOG_FILE} 2>&amp;1 fi done MySQL #!/bin/sh # MySQL Backup script # # db_backup.sh # In summary, this is what is going to happen. # make directory # change directory # dump file # compress directory # remove directory # upload compressed file # Initialize variables specific for this server MYSQL_SOURCE_HOST=192.168.3.100 MYSQL_DATABASE=this_is_my_database MYSQL_SOURCE_USER=i_am_db_user MYSQL_SOURCE_PASS=i_am_db_password SRC_CONN="-h${MYSQL_SOURCE_HOST} -u${MYSQL_SOURCE_USER} -p${MYSQL_SOURCE_PASS}" MYSQL_TABLE=( tbl_one tbl_two ) LOG_FILE=/var/log/mysql-backup.log MYSQL_BACKUP_PATH=/var/script/backup # Definition TIMESTAMP=`date "+%Y-%m-%d %H:%M:%S"` CURRENT_YEAR=`date "+%Y"` CURRENT_MONTH=`date "+%Y-%m"` TODAY_DATE=`date "+%Y-%m-%d"` EPOCH=`date +%s` S3_PATH=s3://name-of-s3-bucket/db/${CURRENT_YEAR}/${CURRENT_MONTH}/${TODAY_DATE} # Remove MySQL Backup older than 3 days /usr/bin/find ${MYSQL_BACKUP_PATH} -type f -mtime +3 -delete echo "MySQL Backup Log: " ${TIMESTAMP} >> ${LOG_FILE} echo -e "--------------------------------------------" >> ${LOG_FILE} echo -e "" >> ${LOG_FILE} MYSQLDUMP_OPTIONS="--hex-blob --compress --lock-tables=false" # Loop through the tables for TBL in "${MYSQL_TABLE[@]}" do FILENAME=${TBL}-${TODAY_DATE}-${EPOCH} # Backup MySQL mysqldump ${SRC_CONN} ${MYSQLDUMP_OPTIONS} ${MYSQL_DATABASE} ${TBL} \ > ${MYSQL_BACKUP_PATH}/${FILENAME}.sql # Compress today's directory tar -zcf ${MYSQL_BACKUP_PATH}/${FILENAME}.tar.gz -C ${MYSQL_BACKUP_PATH} ${FILENAME}.sql # Transfer the file to Amazon S3 s3cmd put --acl-private --guess-mime-type \ ${MYSQL_BACKUP_PATH}/${FILENAME}.tar.gz \ ${S3_PATH}/${FILENAME}.tar.gz >> ${LOG_FILE} 2>&amp;1 done if [ "$?" -eq 1 ] then echo -e "***MySQL BACKUP JOB, THERE WERE ERRORS***" >> ${LOG_FILE} 2>&amp;1 else echo -e "Script Completed Successfully!" >> ${LOG_FILE} 2>&amp;1 fi SVN Repository #!/bin/sh # SVN Off Site Backup script # # svn_backup.sh # Input from command line SVN_REPOSITORY=($1) # Definition TIMESTAMP=`date "+%Y-%m-%d %H:%M:%S"` CURRENT_YEAR=`date "+%Y"` CURRENT_MONTH=`date "+%Y-%m"` TODAY_DATE=`date "+%Y-%m-%d"` EPOCH=`date +%s` LOG_FILE=/var/log/svn-backup.log SVN_BACKUP_PATH=/var/script/backup SVN_PATH=/var/svn/repos S3_PATH=s3://name-of-s3-bucket/svn/${CURRENT_YEAR}/${CURRENT_MONTH} # Remove SVN Backup older than 7 days /usr/bin/find ${SVN_BACKUP_PATH} -type f -mtime +7 -delete echo "SVN Offsite Backup Log: " ${TIMESTAMP} >> ${LOG_FILE} echo -e "--------------------------------------------" >> ${LOG_FILE} echo -e "" >> ${LOG_FILE} # Loop through the SVN Repository for i in ${SVN_REPOSITORY[@]} do FILENAME=$i-${TODAY_DATE}-${EPOCH} # Backup SVN svnadmin dump ${SVN_PATH}/$i | gzip > ${SVN_BACKUP_PATH}/${FILENAME}.svndump.gz # Transfer the file to Amazon S3 s3cmd put --acl-private --guess-mime-type \ ${SVN_BACKUP_PATH}/${FILENAME}.svndump.gz \ ${S3_PATH}/${FILENAME}.svndump.gz >> ${LOG_FILE} 2>&amp;1 if [ "$?" -eq 1 ] then echo -e "***SVN OFFSITE BACKUP JOB, THERE WERE ERRORS***" >> ${LOG_FILE} 2>&amp;1 else echo -e "Script Completed Successfully!" >> ${LOG_FILE} 2>&amp;1 fi done SVN Repository to Backup #!/bin/sh # SVN Repository to Backup # # call_backup.sh svn_repository=( my-project-number-one my-project-number-two my-project-number-three ) /var/script/svn_backup.sh "${svn_repository[*]}"</p></div><footer class=entry-footer><span title='2016-03-21 12:00:00 +0800 +0800'>March 21, 2016</span></footer><a class=entry-link aria-label="post link to Various Backup Scripts" href=https://www.ytpor.com/2016/03/various-backup-scripts.html></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>csync2 Installation and Setup</h2></header><div class=entry-content><p>Csync2 is a cluster synchronization tool. It can be used to keep files on multiple hosts in a cluster in sync. Csync2 can handle complex setups with much more than just 2 hosts, handle file deletions and can detect conflicts.
Installation Build and Install csycn2 by running the below script - build-csync2.sh
#!/bin/sh # build-csync2.sh # Make directory to store csync2 related mkdir -p /data/build/ mkdir -p /data/sync-db/ mkdir -p /data/logs/csync2 mkdir -p /data/sync-conflicts/ cd /data/build/ # Get the files from our own file repository wget http://downloads.sourceforge.net/librsync/librsync-0.9.7.tar.gz wget http://oss.linbit.com/csync2/csync2-2.0.tar.gz # Install the packages required to compile csync2 yum install xinetd byacc flex gcc-c++ gnutls gnutls-devel openssl-devel openssl-static sqlite-devel -y # Untar the files tar -xzf librsync-0.9.7.tar.gz tar -xzf csync2-2.0.tar.gz # Build csync2 cd /data/build/csync2-2.0 ./configure \ --prefix=/usr \ --with-librsync-source=/data/build/librsync-0.9.7.tar.gz \ --localstatedir=/var \ --sysconfdir=/etc \ --disable-gnutls make && make install # Remove the directories that we no longer need cd .. rm -rf librsync-0.9.7 rm -rf csync2-2.0 # Add the csync2 port number to /etc/services echo "csync2 30865/tcp" >> /etc/services CSYNCLOC=`which csync2` # Create a xinted definition file for csync2 echo -e "# default: on\n# description: csync2 xinetd server\n\nservice csync2\n{\n disable = no\n flags = REUSE\n socket_type = stream\n wait = no\n user = root\n group = root\n server = $CSYNCLOC\n server_args = -i -D /data/sync-db/\n port = 30865\n type = UNLISTED\n log_type = FILE /data/logs/csync2/csync2-xinetd.log\n log_on_failure += USERID\n}\n" > /etc/xinetd.d/csync2 # Restart the service to include the newly created definition service xinetd restart Setup First, generate ONE self-signed SSL certificate that would be used by your cluster.
...</p></div><footer class=entry-footer><span title='2016-03-14 12:00:00 +0800 +0800'>March 14, 2016</span></footer><a class=entry-link aria-label="post link to csync2 Installation and Setup" href=https://www.ytpor.com/2016/03/csync2-installation-and-setup.html></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Running FTP on CentOS</h2></header><div class=entry-content><p>Here’s how you can easily setup FTP on CentOS
yum install vsftpd Added these to the security group if you are running AWS EC2
Add port range 20-21 Add port range 1024-1048
vi /etc/vsftpd/vsftpd.conf Set anonymous_enable=NO Set chroot_local_user=YES Add these
pasv_enable=YES pasv_min_port=1024 pasv_max_port=1048 pasv_address=&lt;Public IP of your instance> sudo service vsftpd restart To make sure that the service is started on reboot
chkconfig --level 345 vsftpd on Create new FTP User
useradd -d /path/to/new/home/dir -G apache userNameHere chown userNameHere:apache /path/to/new/home/dir passwd userNameHere The log file can be found in /var/log/xferlog
...</p></div><footer class=entry-footer><span title='2016-03-11 20:00:00 +0800 +0800'>March 11, 2016</span></footer><a class=entry-link aria-label="post link to Running FTP on CentOS" href=https://www.ytpor.com/2016/03/running-ftp-on-centos.html></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>SVN Users and Repositories</h2></header><div class=entry-content><p>We have setup our SVN to be accessed through http with the help of Apache. Here’s a sample configuration that we have used.
vi /etc/httpd/conf.d/vhosts.conf Add the below into subversion.conf
&lt;VirtualHost *:443> ServerName svn.mydomain.com DocumentRoot /var/www/svn.mydomain.com &lt;Directory /var/www/svn.mydomain.com> AllowOverride All Order Allow,Deny Allow from all Options -Indexes Require all granted &lt;/Directory> &lt;Location /repos/newrepository> DAV svn SVNPath /var/svn/repos/newrepository AuthName "Subversion repository" AuthType Digest AuthUserFile /var/svn/svn-auth.htdigest AuthzSVNAccessFile /var/svn/svn-acl.conf Require valid-user &lt;/Location> SSLEngine on SSLProtocol all SSLCertificateFile /etc/pki/tls/certs/ca.svn.mydomain.com.crt SSLCertificateKeyFile /etc/pki/tls/private/ca.svn.mydomain.com.key ErrorLog /var/log/httpd/svn.mydomain.com-error_log CustomLog /var/log/httpd/svn.mydomain.com-access_log combined &lt;/VirtualHost> You can create a new SVN user by using the command below. This would store the encrypted password into svn-auth.htdigest
...</p></div><footer class=entry-footer><span title='2016-03-07 12:00:00 +0800 +0800'>March 7, 2016</span></footer><a class=entry-link aria-label="post link to SVN Users and Repositories" href=https://www.ytpor.com/2016/03/svn-users-and-repositories.html></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Testing Yii with Codeception</h2></header><div class=entry-content><p>We have an application written in Yii. Up til this point, it has been manually tested. Since it’s more efficient to automate the testing of this application, we have decided to set up Codeception to assist us with this task.
Set up was easy and straight forward - this said after spending countless hours understanding the correct way to set it up.
To illustrate the set up process, we’ll create a skeleton Yii app.
...</p></div><footer class=entry-footer><span title='2016-02-02 18:19:00.001 +0800 +0800'>February 2, 2016</span></footer><a class=entry-link aria-label="post link to Testing Yii with Codeception" href=https://www.ytpor.com/2016/02/testing-yii-with-codeception.html></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>What I've Learnt Migrating a Blog from Wordpress to Blogger</h2></header><div class=entry-content><p>As per the subject, migrating a blog from Wordpress to Blogger isn’t as hard as most would have imagined, On the down side, it’s a bit tedious if you have stored your images with your Wordpress blog. For my case, I have always stored my images on Picasa Web, so, I need not go through the process of copying the images out from the Wordpress blog.
Here’s the straight forward process of exporting your Wordpress blog into Blogger.
...</p></div><footer class=entry-footer><span title='2016-01-21 18:52:00.001 +0800 +0800'>January 21, 2016</span></footer><a class=entry-link aria-label="post link to What I've Learnt Migrating a Blog from Wordpress to Blogger" href=https://www.ytpor.com/2016/01/what-ive-learnt-migrating-blog-from.html></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Share Your Knowledge and Pass It Along</h2></header><div class=entry-content><p>Knowledge gained through hard work or experience are meant to be shared. You might think that holding on to this knowledge would make you indispensable, or by sharing, it would jeopardize your position since someone else can do it.
Yet, have you considered the possibility that you have limited yourself to the scope of this work? You’ll end up being the person doing it all the time, and losing the chance to gain new knowledge and experience.
...</p></div><footer class=entry-footer><span title='2016-01-08 18:57:00 +0800 +0800'>January 8, 2016</span></footer><a class=entry-link aria-label="post link to Share Your Knowledge and Pass It Along" href=https://www.ytpor.com/2016/01/share-your-knowledge-and-pass-it-along.html></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://www.ytpor.com/page/2/>«&nbsp;Prev&nbsp;</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://www.ytpor.com/>YT Por</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>